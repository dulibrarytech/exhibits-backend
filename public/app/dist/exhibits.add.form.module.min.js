let exhibitsAddFormModule=(()=>{let l=window.localStorage.getItem("exhibits_app_path"),s=endpointsModule.get_exhibits_endpoints();var e={};return e.create_exhibit_record=async function(){let a=document.querySelector("#message");var t=(e,t,r="fa-info")=>{var o;a?((o=document.createElement("div")).className="alert alert-"+e,o.setAttribute("role","alert"),(e=document.createElement("i")).className="fa "+r,r=document.createTextNode(" "+t),o.appendChild(e),o.appendChild(r),a.innerHTML="",a.appendChild(o)):console.error("Message element not found")};let r=null;try{window.scrollTo({top:0,left:0,behavior:"instant"});var o=authModule.get_user_token();if(!o)return t("warning","Unable to get session token"),r=setTimeout(()=>{authModule.logout()},1e3),!1;var i=(()=>{try{var e=exhibitsCommonFormModule.get_common_form_fields();return!1!==e&&(e.styles=exhibitsCommonFormModule.get_exhibit_styles()),e}catch(e){document.querySelector("#message").innerHTML=`<div class="alert alert-danger" role="alert"><i class="fa fa-exclamation"></i> ${e.message}</div>`}})();if(console.log("DATA ",i),!i)return!1;t("info","Creating exhibit record..."),i.created_by=helperModule.get_user_name(),i.owner=helperModule.get_owner();var n=await Promise.race([httpModule.req({method:"POST",url:s.exhibits.exhibit_records.endpoint,data:i,headers:{"Content-Type":"application/json","x-access-token":o}}),new Promise((e,t)=>setTimeout(()=>t(new Error("Request timeout")),3e4))]);if(!n||201!==n.status)throw new Error("Failed to create exhibit record");if(!n.data?.data)throw new Error("Invalid response from server");t("success","Exhibit record created");let e=encodeURIComponent(n.data.data);return r=setTimeout(()=>{window.location.href=l+"/items?exhibit_id="+e},900),!0}catch(e){return r&&clearTimeout(r),console.error("Create exhibit error:",e),t("danger",e.message||"An unexpected error occurred","fa-exclamation"),!1}},e.init=function(){try{document.querySelector("#save-exhibit-btn").addEventListener("click",exhibitsAddFormModule.create_exhibit_record),document.querySelector("#hero-trash").addEventListener("click",exhibitsCommonFormModule.delete_hero_image),document.querySelector("#thumbnail-trash").addEventListener("click",exhibitsCommonFormModule.delete_thumbnail_image),document.querySelector("#item-list-nav").innerHTML=""}catch(e){document.querySelector("#message").innerHTML=`<div class="alert alert-danger" role="alert"><i class="fa fa-exclamation"></i> ${e.message}</div>`}},e})();