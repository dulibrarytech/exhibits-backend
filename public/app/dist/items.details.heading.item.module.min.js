let itemsDetailsHeadingModule=(()=>{let u=window.localStorage.getItem("exhibits_app_path"),c=endpointsModule.get_exhibits_endpoints();var e={};async function a(){var e=await(async()=>{try{var e,t=helperModule.get_parameter_by_name("exhibit_id"),a=helperModule.get_parameter_by_name("item_id"),o=authModule.get_user_token(),r=authModule.get_user_profile_data(),l=c.exhibits.heading_records.get.endpoint.replace(":exhibit_id",t).replace(":heading_id",a);return!1===o?(document.querySelector("#message").innerHTML="ERROR: Unable to get API endpoints",setTimeout(()=>{window.location.replace(u+"/login")},1e3),!1):void 0!==(e=await httpModule.req({method:"GET",url:l+"?type=edit&uid="+r.uid,headers:{"Content-Type":"application/json","x-access-token":o}}))&&200===e.status?e.data.data[0]:void 0}catch(e){document.querySelector("#message").innerHTML=`<div class="alert alert-danger" role="alert"><i class="fa fa-exclamation"></i> ${e.message}</div>`}})();let t;var a=e.is_published,o=e.created_by,r=new Date(e.created),l=e.updated_by,i=e.updated,i=new Date(i);let n="";r=helperModule.format_date(r),i=helperModule.format_date(i);if(helperModule.check_if_locked(e,"#item-submit-card"),null!==o&&(n+=`<em>Created by ${o} on ${r}</em>`),null!==l&&(n+=` | <em>Last updated by ${l} on ${i}</em>`),document.querySelector("#created").innerHTML=n,document.querySelector("#item-heading-text-input").value=helperModule.unescape(e.text),null!==document.querySelector("#is-published")&&1===a?document.querySelector("#is-published").value=!0:null!==document.querySelector("#is-published")&&0===a&&(document.querySelector("#is-published").value=!1),"string"==typeof e.styles&&(t=JSON.parse(e.styles)),0!==Object.keys(t).length){void 0!==t.backgroundColor&&0!==t.backgroundColor.length&&(document.querySelector("#heading-background-color").value=t.backgroundColor,document.querySelector("#heading-background-color-picker").value=t.backgroundColor),void 0!==t.color&&0!==t.color.length&&(document.querySelector("#heading-font-color").value=t.color,document.querySelector("#heading-font-color-picker").value=t.color),void 0!==t.fontSize?document.querySelector("#heading-font-size").value=t.fontSize.replace("px",""):document.querySelector("#heading-font-size").value="";var d=document.querySelector("#heading-font");for(let e=0;e<d.length;e++)d[e].value===t.fontFamily&&(document.querySelector("#heading-font").value=t.fontFamily)}return!1}return e.init=async function(){try{var e=helperModule.get_parameter_by_name("status"),t=(null!==e&&"403"===e&&(window.scrollTo(0,0),document.querySelector("#message").innerHTML='<div class="alert alert-danger" role="alert"><i class="fa fa-exclamation"></i> You do not have permission to edit this record.</div>'),helperModule.get_parameter_by_name("exhibit_id"));await exhibitsModule.set_exhibit_title(t),document.querySelector("#save-heading-btn").addEventListener("click",await itemsDetailsHeadingModule.update_item_heading_record),await a()}catch(e){document.querySelector("#message").innerHTML=`<div class="alert alert-danger" role="alert"><i class="fa fa-exclamation"></i> ${e.message}</div>`}},e})();