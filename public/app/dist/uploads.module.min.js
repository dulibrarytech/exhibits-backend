let uploadsModule=(()=>{let n=(()=>{try{var e=window.localStorage.getItem("exhibits_app_path");return e?e:(console.error("Application path not found in localStorage"),"")}catch(e){return console.error("Error accessing localStorage:",e),""}})(),d=`${location.protocol}//${location.host}${n}/uploads`;var e={};let m=(e,i)=>{var a;e&&((a=document.createElement("span")).style.fontSize="11px",a.textContent=i,e.textContent="",e.appendChild(a))},p=(e,i,a="Thumbnail")=>{var t,o;e&&(t=document.createElement("p"),(o=document.createElement("img")).src=i,o.alt=a,o.height=200,t.appendChild(o),e.textContent="",e.appendChild(t))},u=(e,i)=>{var a,t;e?((a=document.createElement("span")).className="alert alert-danger",a.style.border="solid 1px",(t=document.createElement("i")).className="fa fa-exclamation",a.appendChild(t),t=document.createTextNode(" "+i),a.appendChild(t),e.textContent="",e.appendChild(a)):console.error("Error element not found:",i)},s=e=>{e&&(e.textContent="")},c=e=>{e&&(e.style.display="inline")},h=(e,i)=>{e=e.split(".").pop().toLowerCase();return i.includes(e)},i=i=>{const e=d,a="files",t=!1,o=1,l=!0,r=3e4,n=!0,m=function(){console.log("Dropzone initialized: "+i.zone_name)};return{paramName:i.param_name||a,maxFilesize:i.max_filesize,url:e,uploadMultiple:t,maxFiles:o,acceptedFiles:i.accepted_files,ignoreHiddenFiles:l,timeout:r,dictDefaultMessage:i.dict_message,autoProcessQueue:n,init:m,renameFile:function(e){return((e,i)=>{e=e.split(".").pop().toLowerCase();return Date.now()+`_${i}.`+e})(e.name,i.file_type)},success:i.success_handler,error:i.error_handler||function(e,i){var a=document.querySelector(".upload-error");u(a,i),this.removeFile(e)}}};return e.upload_exhibit_hero_image=function(){Dropzone.options.heroDropzone=i({zone_name:"Hero Image",max_filesize:1e3,accepted_files:"image/png,image/jpeg,image/jpg",dict_message:"<small><em>Drag and Drop Hero Image file here or Click to Upload</em></small>",file_type:"exhibit_hero",success_handler:function(a,e){let t={error:document.querySelector(".upload-error"),hero_image:document.querySelector("#hero-image"),filename_display:document.querySelector("#hero-image-filename-display"),hero_trash:document.querySelector("#hero-trash"),hero_display:document.querySelector("#hero-image-display")};if(a.upload&&a.upload.filename){let i=a.upload.filename;h(i,["png","jpeg","jpg"])?(s(t.error),t.hero_image&&(t.hero_image.value=i),m(t.filename_display,i),c(t.hero_trash),setTimeout(()=>{this.removeFile(a);var e=n+"/media?media="+encodeURIComponent(i);p(t.hero_display,e,i)},1500),console.log("Hero image uploaded:",i)):(u(t.error,"Invalid file type"),this.removeFile(a))}else u(t.error,"Upload failed - no filename received"),this.removeFile(a)}})},e.upload_exhibit_thumbnail_image=function(){Dropzone.options.thumbnailDropzone=i({zone_name:"Thumbnail Image",max_filesize:1e3,accepted_files:"image/png,image/jpeg,image/jpg",dict_message:"<small><em>Drag and Drop Thumbnail Image file here or Click to Upload</em></small>",file_type:"exhibit_thumbnail",success_handler:function(a,e){let t={error:document.querySelector(".upload-error"),thumbnail_image:document.querySelector("#thumbnail-image"),filename_display:document.querySelector("#thumbnail-filename-display"),thumbnail_trash:document.querySelector("#thumbnail-trash"),thumbnail_display:document.querySelector("#thumbnail-image-display")};if(a.upload&&a.upload.filename){let i=a.upload.filename;h(i,["png","jpeg","jpg"])?(s(t.error),t.thumbnail_image&&(t.thumbnail_image.value=i),m(t.filename_display,i),c(t.thumbnail_trash),setTimeout(()=>{var e=n+"/media?media="+encodeURIComponent(i);p(t.thumbnail_display,e,i),this.removeFile(a)},1500),console.log("Thumbnail image uploaded:",i)):(u(t.error,"Invalid file type"),this.removeFile(a))}else u(t.error,"Upload failed - no filename received"),this.removeFile(a)}})},e.upload_item_media=function(){Dropzone.options.itemDropzone=i({zone_name:"Item Media",max_filesize:1e4,accepted_files:"image/png,image/jpeg,image/jpg,application/pdf",dict_message:"<small><em>Drag and Drop Item Media file here or Click to Upload</em></small>",file_type:"item_media",success_handler:function(t,e){let o={error:document.querySelector(".upload-error"),item_type:document.querySelector("#item-type"),item_mime_type:document.querySelector("#item-mime-type"),item_media:document.querySelector("#item-media"),filename_display:document.querySelector("#item-media-filename-display"),media_trash:document.querySelector("#item-media-trash"),thumbnail_display:document.querySelector("#item-media-thumbnail-image-display"),image_alt_text:document.querySelector("#image-alt-text"),toggle_open_to_page:document.querySelector("#toggle-open-to-page")};if(t.upload&&t.upload.filename){let a=t.upload.filename;var l,r=t.type;if(h(a,["png","jpeg","jpg","pdf"])){let i=(l=r)?-1!==(l=l.toLowerCase()).indexOf("image")?"image":-1!==l.indexOf("video")?"video":-1!==l.indexOf("audio")?"audio":-1!==l.indexOf("pdf")?"pdf":"unknown":"unknown";"function"==typeof helperMediaModule?.clear_media_fields&&helperMediaModule.clear_media_fields("uploaded_media"),s(o.error),o.item_type&&(o.item_type.value=i),o.item_mime_type&&(o.item_mime_type.value=r),o.item_media&&(o.item_media.value=a),m(o.filename_display,a),c(o.media_trash),"image"==i&&o.image_alt_text&&(o.image_alt_text.style.display="block"),"pdf"==i&&o.toggle_open_to_page&&(o.toggle_open_to_page.style.visibility="visible"),setTimeout(()=>{var e=((e,i)=>{switch(e){case"image":return n+"/media?media="+encodeURIComponent(i);case"video":return"/exhibits-dashboard/static/images/video-tn.png";case"audio":return"/exhibits-dashboard/static/images/audio-tn.png";case"pdf":return"/exhibits-dashboard/static/images/pdf-tn.png";default:return"/exhibits-dashboard/static/images/default-tn.png"}})(i,a);p(o.thumbnail_display,e,a),this.removeFile(t)},1500),console.log(`Item media uploaded: ${a} (${i})`)}else u(o.error,"Invalid file type"),this.removeFile(t)}else u(o.error,"Upload failed - no filename received"),this.removeFile(t)}})},e.upload_item_thumbnail=function(){Dropzone.options.itemThumbnailDropzone=i({zone_name:"Item Thumbnail",max_filesize:1e3,accepted_files:"image/png,image/jpeg,image/jpg",dict_message:"<small><em>Drag and Drop Item Thumbnail file here or Click to Upload</em></small>",file_type:"item_thumbnail",success_handler:function(a,e){let t={error:document.querySelector(".upload-error"),item_thumbnail:document.querySelector("#item-thumbnail"),filename_display:document.querySelector("#item-thumbnail-filename-display"),thumbnail_trash:document.querySelector("#item-thumbnail-trash"),thumbnail_display:document.querySelector("#item-thumbnail-image-display")};if(a.upload&&a.upload.filename){let i=a.upload.filename;h(i,["png","jpeg","jpg"])?(s(t.error),t.item_thumbnail&&(t.item_thumbnail.value=i),m(t.filename_display,i),c(t.thumbnail_trash),setTimeout(()=>{var e=n+"/media?media="+encodeURIComponent(i);p(t.thumbnail_display,e,i),this.removeFile(a)},1500),console.log("Item thumbnail uploaded:",i)):(u(t.error,"Invalid file type"),this.removeFile(a))}else u(t.error,"Upload failed - no filename received"),this.removeFile(a)}})},e.init=function(){return console.log("Uploads module initialized"),n?(console.log("Upload endpoint:",d),!0):(console.error("Application path not configured"),!1)},e})();