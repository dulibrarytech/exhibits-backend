let itemsAddGridItemFormModule=(()=>{let o=window.localStorage.getItem("exhibits_app_path"),l=endpointsModule.get_exhibits_endpoints();var e={create_grid_item_record:async function(){try{window.scrollTo(0,0);let i=helperModule.get_parameter_by_name("exhibit_id"),r=helperModule.get_parameter_by_name("grid_id");if(void 0===r)return!(document.querySelector("#message").innerHTML='<div class="alert alert-warning" role="alert"><i class="fa fa-info"></i> Unable to create grid item record.</div>');document.querySelector("#message").innerHTML='<div class="alert alert-info" role="alert"><i class="fa fa-info"></i> Creating grid item record...</div>';var e=itemsCommonGridItemFormModule.get_common_grid_item_form_fields();if(void 0===e)return!(document.querySelector("#message").innerHTML='<div class="alert alert-danger" role="alert"><i class="fa fa-exclamation"></i> Unable to get form field values</div>');if(!1===e)return!1;e.created_by=helperModule.get_user_name(),e.owner=helperModule.get_owner();var t=l.exhibits.grid_item_records.post.endpoint.replace(":exhibit_id",i).replace(":grid_id",r),a=authModule.get_user_token(),d=await httpModule.req({method:"POST",url:t,data:e,headers:{"Content-Type":"application/json","x-access-token":a}});if(void 0!==d&&201===d.status){document.querySelector("#message").innerHTML='<div class="alert alert-success" role="alert"><i class="fa fa-info"></i> Grid item record created</div>';let t=d.data.data;setTimeout(()=>{let e="text";-1!==window.location.pathname.indexOf("media")&&(e="media"),window.location.replace(`${o}/items/grid/item/${e}/edit?exhibit_id=${i}&grid_id=${r}&item_id=`+t)},900)}else void 0===d&&(document.querySelector("#message").innerHTML='<div class="alert alert-danger" role="alert"><i class="fa fa-exclamation"></i> You do not have permission to add item to this exhibit.</div>')}catch(e){document.querySelector("#message").innerHTML=`<div class="alert alert-danger" role="alert"><i class="fa fa-exclamation"></i> ${e.message}</div>`}},init:async function(){try{var e=helperModule.get_parameter_by_name("exhibit_id"),t="/items/grid/items?exhibit_id="+e+"&grid_id="+helperModule.get_parameter_by_name("grid_id")+"&status=403";await authModule.check_permissions(["add_item","add_item_to_any_exhibit"],"grid_item",e,null,t),exhibitsModule.set_exhibit_title(e),document.querySelector("#save-item-btn").addEventListener("click",itemsAddGridItemFormModule.create_grid_item_record)}catch(e){document.querySelector("#message").innerHTML=`<div class="alert alert-danger" role="alert"><i class="fa fa-exclamation"></i> ${e.message}</div>`}}};return e})();