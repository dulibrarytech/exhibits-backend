let itemsCommonVerticalTimelineItemFormModule=(()=>{var e={get_common_timeline_item_form_fields:function(){try{var e={styles:{}},t=window.location.pathname.includes("media"),a=(e,t="")=>document.querySelector(e)?.value?.trim()??t,i=e=>{var t=document.querySelector("#message");t&&(t.innerHTML=`<div class="alert alert-danger" role="alert"><i class="fa fa-exclamation"></i> ${e}</div>`)};if(e.title=a("#item-title-input"),e.text=a("#item-text-input"),e.date=a('input[type="date"]'),e.item_subjects=a("#selected-subjects"),!e.date||0===e.date.length)return i("Please enter a timeline date"),!1;if(!/^\d{4}-\d{2}-\d{2}$/.test(e.date))return i("Please enter a valid date format (YYYY-MM-DD)"),!1;var r=new Date(e.date);if(isNaN(r.getTime()))return i("Please enter a valid date"),!1;if(t){if(!helperMediaModule)return console.error("helperMediaModule is not available"),i("System configuration error."),!1;if(helperMediaModule.process_media_fields_common(e),!(0<e.media?.length||0<e.kaltura?.length||0<e.repo_uuid?.length))return i("Please upload or import a media item"),!1;if("image"===e.item_type){var l=document.querySelector("#item-alt-text-input")?.value?.trim()??"";if(!0===e.is_alt_text_decorative)e.is_alt_text_decorative=1,e.alt_text="";else if(!1===e.is_alt_text_decorative&&(e.is_alt_text_decorative=0)===(e.alt_text=l).length)return i('Please enter "alt text" for this item'),!1}}else e.item_type="text",e.mime_type="text/plain";return e}catch(e){console.error("Error in get_common_timeline_item_form_fields:",e.message);a=document.querySelector("#message");return a&&(a.innerHTML=`<div class="alert alert-danger" role="alert"><i class="fa fa-exclamation"></i> ${e.message}</div>`),!1}},init:async function(){try{-1!==window.location.pathname.indexOf("media")&&helperMediaModule.media_common_init();var e=authModule.get_user_token();await authModule.check_auth(e),navModule.init(),navModule.back_to_timeline_items(),navModule.set_preview_link(),helperModule.show_form()}catch(e){document.querySelector("#message").innerHTML=`<div class="alert alert-danger" role="alert"><i class="fa fa-exclamation"></i> ${e.message}</div>`}}};return e})();