let itemsListDisplayModule=(()=>{let K=(()=>{try{var e=window.localStorage.getItem("exhibits_app_path");return e?e:(console.error("App path not found in localStorage"),"")}catch(e){return console.error("Error accessing localStorage:",e),""}})(),V=(()=>{try{return endpointsModule.get_exhibits_endpoints()}catch(e){return console.error("Error getting exhibits endpoints:",e),null}})();var e={};let P=e=>{var t,i,d=document.querySelector("#message");d?((t=document.createElement("div")).className="alert alert-danger",t.setAttribute("role","alert"),(i=document.createElement("i")).className="fa fa-exclamation",i.setAttribute("aria-hidden","true"),t.appendChild(i),i=document.createTextNode(" "+e),t.appendChild(i),d.textContent="",d.appendChild(t)):console.error("Message element not found:",e)},q=(e="",t=null)=>{var i=document.createElement("td");return e&&(i.className=e),t&&("string"==typeof t?i.textContent=t:i.appendChild(t)),i},z=(e,t="",i="",d="")=>{var n=document.createElement("i");return n.className=e,n.setAttribute("aria-hidden","true"),t&&n.setAttribute("title",t),i&&n.setAttribute("aria-label",i),d&&(n.style.color=d),n},F=(e,t,i,d,n="")=>{var a=document.createElement("a"),e=(a.href=e,a.setAttribute("title",t),a.setAttribute("aria-label",i),z(d));return a.appendChild(e),n&&(t=document.createTextNode(n),a.appendChild(t)),a},Y=(e,t)=>{var i=document.createElement("a"),e=(i.href="#",i.id=e,i.setAttribute("aria-label","Toggle publication status"),document.createElement("span"));return 1===t?(i.className="suppress-item",e.id="suppress",e.setAttribute("title","Published - click to unpublish"),t=z("fa fa-cloud","","","green"),e.appendChild(t),e.appendChild(document.createElement("br")),e.appendChild(document.createTextNode("Published"))):(i.className="publish-item",e.id="publish",e.setAttribute("title","Unpublished - click to publish"),t=z("fa fa-cloud-upload","","","darkred"),e.appendChild(t),e.appendChild(document.createElement("br")),e.appendChild(document.createTextNode("Unpublished"))),i.appendChild(e),i},D=e=>{var t=document.createElement("td"),i=(t.className="grabbable item-order",z("fa fa-reorder")),i=(t.appendChild(i),document.createElement("span"));return i.style.paddingLeft="4px",i.setAttribute("aria-label","Item order "+e),i.textContent=e.toString(),t.appendChild(i),t},M=(e,t,i)=>{var d=encodeURIComponent(e.is_member_of_exhibit),n=encodeURIComponent(e.uuid);let a="",l="",m="";return m=1===i?(a="text"===e.item_type?K+`/items/${t}/text/details?exhibit_id=${d}&item_id=`+n:"heading"===e.type||"timeline"===e.type?K+`/items/${t}/details?exhibit_id=${d}&item_id=`+n:K+`/items/${t}/media/details?exhibit_id=${d}&item_id=`+n,l="View details","fa fa-folder-open pr-1"):(a="text"===e.item_type?K+`/items/${t}/text/edit?exhibit_id=${d}&item_id=`+n:"heading"===e.type||"timeline"===e.type?K+`/items/${t}/edit?exhibit_id=${d}&item_id=`+n:K+`/items/${t}/media/edit?exhibit_id=${d}&item_id=`+n,l="Edit item","fa fa-edit pr-1"),F(a,l,""+l.toLowerCase().replace(" ","-"),m)},w=(e,t)=>{var i;return 1===t?z("fa fa-trash pr-1","Can only delete if unpublished","delete-disabled","#d3d3d3"):(t=encodeURIComponent(e.is_member_of_exhibit),i=encodeURIComponent(e.uuid),e=encodeURIComponent(e.type),t=K+`/items/delete?exhibit_id=${t}&item_id=${i}&type=`+e,F(t,"Delete item","delete-item","fa fa-trash pr-1"))},j=e=>{e={text:"fa fa-file-text-o",image:"fa fa-image",video:"fa fa-file-video-o",audio:"fa fa-file-audio-o",pdf:"fa fa-file-pdf-o"}[e]||"fa fa-file-o";return z(e)},G=e=>{var t={video:K+"/static/images/video-tn.png",audio:K+"/static/images/audio-tn.png",pdf:K+"/static/images/pdf-tn.png",default:K+"/static/images/image-tn.png"};return t[e]||t.default},J=(e,t,i=75,d=75)=>{var n=document.createElement("p"),a=document.createElement("img");return a.src=e,a.alt=t,a.width=i,a.height=d,n.appendChild(a),n};return e.display_standard_items=async function(d){try{if(!d||!d.uuid)throw new Error("Invalid item data");var n,a,l,m,r,p,o,c=document.createElement("tr"),s=(c.id=d.uuid+`_${d.item_type}_`+d.type,0===d.is_published?c.appendChild(D(d.order)):((n=document.createElement("td")).className="item-order",(a=document.createElement("span")).style.paddingLeft="4px",a.setAttribute("aria-label","Item order "+d.order),a.textContent=d.order.toString(),n.appendChild(a),c.appendChild(n)),document.createElement("td")),u=(s.className="item-metadata",document.createElement("p")),h=document.createElement("button"),_=(h.className="btn btn-default",h.setAttribute("type","button"),h.setAttribute("aria-label",`${d.item_type||"standard"} item`),j(d.item_type)),b=(h.appendChild(_),h.appendChild(document.createTextNode(" ")),document.createElement("small"));b.textContent="item",h.appendChild(b),u.appendChild(h),1===d.is_locked&&(u.appendChild(document.createTextNode("  ")),l=z("fa fa-lock","Record is currently locked","exhibit-is-locked","#BA8E23"),u.appendChild(l)),s.appendChild(u);let e=helperModule.strip_html(helperModule.unescape(d.title||"")),t=null,i=d.media||"";if("text"!==d.item_type)if(1===d.is_repo_item&&d.media){var C,x=await helperMediaModule.get_repo_item_data(d.media);x&&(e&&0!==e.length||(e=x.title),C=helperMediaModule.render_repo_thumbnail(x.thumbnail.data),t=J(C,d.uuid))}else if(1===d.is_kaltura_item){e&&0!==e.length||(e="Kaltura Item");var g=G(d.item_type);t=J(g,d.item_type+" thumbnail")}else{let e=null;"video"===d.item_type?(e=K+"/static/images/video-tn.png",t=J(e,"video-thumbnail")):"audio"===d.item_type?(e=K+"/static/images/audio-tn.png",t=J(e,"audio-thumbnail")):"pdf"===d.item_type?(e=K+"/static/images/pdf-tn.png",t=J(e,"pdf-thumbnail")):"image"===d.item_type&&(t=t||(d.thumbnail&&0<d.thumbnail.length?(e=V.exhibits.exhibit_media.get.endpoint.replace(":exhibit_id",encodeURIComponent(d.is_member_of_exhibit)).replace(":media",encodeURIComponent(d.thumbnail)),J(e,d.uuid+"-thumbnail")):d.media&&0<d.media.length?(e=V.exhibits.exhibit_media.get.endpoint.replace(":exhibit_id",encodeURIComponent(d.is_member_of_exhibit)).replace(":media",encodeURIComponent(d.media)),J(e,d.uuid+"-media")):(e=K+"/static/images/image-tn.png",J(e,"no-thumbnail"))))}else i="Text only";(e=(!e||0===e.length)&&d.text&&0<d.text.length&&200<(e=helperModule.strip_html(helperModule.unescape(d.text))).length?e.substring(0,200)+"...":e)&&(m=document.createElement("p"),(r=document.createElement("strong")).textContent=e,m.appendChild(r),s.appendChild(m)),t&&s.appendChild(t),i&&(p=document.createElement("small"),(o=document.createElement("em")).textContent=i,p.appendChild(o),s.appendChild(p)),c.appendChild(s);var f=q("item-status",""),y=document.createElement("small"),E=Y(d.uuid,d.is_published),v=(y.appendChild(E),f.appendChild(y),c.appendChild(f),document.createElement("td")),N=(v.id=d.uuid+"-item-actions",v.style.width="10%",document.createElement("div")),$=(N.className="card-text text-sm-center",M(d,"standard",d.is_published)),I=(N.appendChild($),N.appendChild(document.createTextNode(" ")),w(d,d.is_published)),A=(N.appendChild(I),v.appendChild(N),c.appendChild(v),document.createElement("div"));return A.appendChild(c),A.innerHTML}catch(e){return console.error("Error displaying standard item:",e),P(e.message||"Unable to display standard item"),""}},e.display_heading_items=async function(e){try{var t,i,d,n=document.createElement("tr"),a=(n.id=e.uuid+"_"+e.type,n.appendChild(D(e.order)),document.createElement("td")),l=(a.className="item-metadata",document.createElement("p")),m=document.createElement("button"),r=(m.className="btn btn-default",m.setAttribute("type","button"),m.setAttribute("aria-label","heading item"),z("fa fa-header")),p=(m.appendChild(r),m.appendChild(document.createTextNode(" ")),document.createElement("small")),o=(p.textContent="heading",m.appendChild(p),l.appendChild(m),1===e.is_locked&&(l.appendChild(document.createTextNode("  ")),t=z("fa fa-lock","Record is currently locked","exhibit-is-locked","#BA8E23"),l.appendChild(t)),a.appendChild(l),helperModule.strip_html(helperModule.unescape(e.text||""))),c=(o&&(i=document.createElement("p"),(d=document.createElement("strong")).textContent=o,i.appendChild(d),a.appendChild(i)),n.appendChild(a),q("","")),s=(c.style.width="5%",c.style.textAlign="center",Y(e.uuid,e.is_published)),u=(c.appendChild(s),n.appendChild(c),document.createElement("td")),h=(u.id=e.uuid+"-item-actions",u.style.width="10%",document.createElement("div")),_=(h.className="card-text text-sm-center",M(e,"heading",e.is_published)),b=(h.appendChild(_),h.appendChild(document.createTextNode(" ")),w(e,e.is_published)),C=(h.appendChild(b),u.appendChild(h),n.appendChild(u),document.createElement("div"));return C.appendChild(n),C.innerHTML}catch(e){return console.error("Error displaying heading item:",e),P(e.message||"Unable to display heading item"),""}},e.display_grids=async function(e){try{var t,i,d,n=document.createElement("tr"),a=(n.id=e.uuid+"_"+e.type,n.appendChild(D(e.order)),document.createElement("td")),l=(a.className="item-metadata",document.createElement("p")),m=document.createElement("button"),r=(m.className="btn btn-default",m.setAttribute("type","button"),m.setAttribute("aria-label","grid item"),z("fa fa-th")),p=(m.appendChild(r),m.appendChild(document.createTextNode(" ")),document.createElement("small")),o=(p.textContent="grid",m.appendChild(p),l.appendChild(m),1===e.is_locked&&(l.appendChild(document.createTextNode("  ")),t=z("fa fa-lock","Record is currently locked","exhibit-is-locked","#BA8E23"),l.appendChild(t)),a.appendChild(l),helperModule.strip_html(helperModule.unescape(e.title||""))),c=(o&&(i=document.createElement("p"),(d=document.createElement("strong")).textContent=o,i.appendChild(d),a.appendChild(i)),n.appendChild(a),q("","")),s=(c.style.width="5%",c.style.textAlign="center",Y(e.uuid,e.is_published)),u=(c.appendChild(s),n.appendChild(c),document.createElement("td")),h=(u.id=e.uuid+"-item-actions",u.style.width="10%",document.createElement("div")),_=(h.className="card-text text-sm-center",encodeURIComponent(e.is_member_of_exhibit)),b=encodeURIComponent(e.uuid),C=K+`/items/grid/items?exhibit_id=${_}&grid_id=`+b,x=F(C,"View grid items","view-grid-items","fa fa-list pr-1"),g=(h.appendChild(x),h.appendChild(document.createTextNode(" ")),M(e,"grid",e.is_published)),f=(h.appendChild(g),h.appendChild(document.createTextNode(" ")),w(e,e.is_published)),y=(h.appendChild(f),u.appendChild(h),n.appendChild(u),document.createElement("div"));return y.appendChild(n),y.innerHTML}catch(e){return console.error("Error displaying grid:",e),P(e.message||"Unable to display grid"),""}},e.display_grid_items=async function(l){try{if(!l||!l.uuid)throw new Error("Invalid grid item data");l.type="griditem";var m,r,p,o,c,s,u,h=document.createElement("tr"),_=(h.id=l.uuid+`_${l.type}_`+l.item_type,0===l.is_published?h.appendChild(D(l.order)):((m=document.createElement("td")).className="item-order",(r=document.createElement("span")).style.paddingLeft="4px",r.setAttribute("aria-label","Item order "+l.order),r.textContent=l.order.toString(),m.appendChild(r),h.appendChild(m)),document.createElement("td")),b=(_.className="item-metadata",document.createElement("p")),C=document.createElement("button"),x=(C.className="btn btn-default",C.setAttribute("type","button"),C.setAttribute("aria-label",`${l.item_type||"grid"} item`),j(l.item_type)),g=(C.appendChild(x),C.appendChild(document.createTextNode(" ")),document.createElement("small"));g.textContent="grid item",C.appendChild(g),b.appendChild(C),1===l.is_locked&&(b.appendChild(document.createTextNode("  ")),p=z("fa fa-lock","Record is currently locked","exhibit-is-locked","#BA8E23"),b.appendChild(p)),_.appendChild(b);let t=helperModule.unescape(l.title||""),i=null,e="";if("text"!==l.item_type){if(1===l.is_repo_item){var f,y=await helperMediaModule.get_repo_item_data(l.media);y&&(t=t||y.title,f=helperMediaModule.render_repo_thumbnail(y.thumbnail.data),i=J(f,"Repository item thumbnail"))}else if(1===l.is_kaltura_item){t=t||"Kaltura Item";var E=G(l.item_type);i=J(E,"Kaltura item thumbnail")}else if("image"===l.item_type){let e="";e=l.thumbnail&&0<l.thumbnail.length?V.exhibits.exhibit_media.get.endpoint.replace(":exhibit_id",encodeURIComponent(l.is_member_of_exhibit)).replace(":media",encodeURIComponent(l.thumbnail)):l.media&&0<l.media.length?V.exhibits.exhibit_media.get.endpoint.replace(":exhibit_id",encodeURIComponent(l.is_member_of_exhibit)).replace(":media",encodeURIComponent(l.media)):G("default"),i=J(e,t||"Item image")}else{var v=G(l.item_type);i=J(v,l.item_type+" thumbnail")}l.media&&0<l.media.length&&(e=l.media)}else e="Text only";(t=!t&&l.text&&0<l.text.length&&200<(t=helperModule.unescape(l.text)).length?t.substring(0,200)+"...":t)&&(o=document.createElement("p"),(c=document.createElement("strong")).textContent=t,o.appendChild(c),_.appendChild(o)),i&&_.appendChild(i),e&&(s=document.createElement("small"),(u=document.createElement("em")).textContent=e,s.appendChild(u),_.appendChild(s)),h.appendChild(_);var N=q("",""),$=(N.style.width="5%",N.style.textAlign="center",document.createElement("small")),I=Y(l.uuid,l.is_published),A=($.appendChild(I),N.appendChild($),h.appendChild(N),document.createElement("td")),M=(A.id=l.uuid+"-item-actions",A.style.width="10%",document.createElement("div")),w=(M.className="card-text text-sm-center",encodeURIComponent(l.is_member_of_exhibit)),R=encodeURIComponent(l.is_member_of_grid),U=encodeURIComponent(l.uuid);let d="",n="",a="";a=1===l.is_published?(d="text"===l.item_type?K+`/items/grid/item/text/details?exhibit_id=${w}&grid_id=${R}&item_id=`+U:K+`/items/grid/item/media/details?exhibit_id=${w}&grid_id=${R}&item_id=`+U,n="View details","fa fa-folder-open pr-1"):(d="text"===l.item_type?K+`/items/grid/item/text/edit?exhibit_id=${w}&grid_id=${R}&item_id=`+U:K+`/items/grid/item/media/edit?exhibit_id=${w}&grid_id=${R}&item_id=`+U,n="Edit grid item","fa fa-edit pr-1");var T,k,L,S=F(d,n,n.toLowerCase().replace(" ","-"),a),B=(M.appendChild(S),M.appendChild(document.createTextNode(" ")),1===l.is_published?(T=z("fa fa-trash pr-1","Can only delete if unpublished","delete-disabled","#d3d3d3"),M.appendChild(T)):(k=K+`/items/grid/item/delete?exhibit_id=${w}&grid_id=${R}&item_id=`+U,L=F(k,"Delete grid item","delete-grid-item","fa fa-trash pr-1"),M.appendChild(L)),A.appendChild(M),h.appendChild(A),document.createElement("div"));return B.appendChild(h),B.innerHTML}catch(e){return console.error("Error displaying grid item:",e),P(e.message||"Unable to display grid item"),""}},e.display_timelines=async function(e){try{var t,i,d,n=document.createElement("tr"),a=(n.id=e.uuid+"_"+e.type,n.appendChild(D(e.order)),document.createElement("td")),l=(a.className="item-metadata",document.createElement("p")),m=document.createElement("button"),r=(m.className="btn btn-default",m.setAttribute("type","button"),m.setAttribute("aria-label","timeline item"),z("fa fa-clock-o")),p=(m.appendChild(r),m.appendChild(document.createTextNode(" ")),document.createElement("small")),o=(p.textContent="timeline",m.appendChild(p),l.appendChild(m),1===e.is_locked&&(l.appendChild(document.createTextNode("  ")),t=z("fa fa-lock","Record is currently locked","exhibit-is-locked","#BA8E23"),l.appendChild(t)),a.appendChild(l),helperModule.strip_html(helperModule.unescape(e.title||""))),c=(o&&(i=document.createElement("p"),(d=document.createElement("strong")).textContent=o,i.appendChild(d),a.appendChild(i)),n.appendChild(a),q("","")),s=(c.style.width="5%",c.style.textAlign="center",Y(e.uuid,e.is_published)),u=(c.appendChild(s),n.appendChild(c),document.createElement("td")),h=(u.id=e.uuid+"-item-actions",u.style.width="10%",document.createElement("div")),_=(h.className="card-text text-sm-center",encodeURIComponent(e.is_member_of_exhibit)),b=encodeURIComponent(e.uuid),C=K+`/items/timeline/items?exhibit_id=${_}&timeline_id=`+b,x=F(C,"View timeline items","view-timeline-items","fa fa-list pr-1"),g=(h.appendChild(x),h.appendChild(document.createTextNode(" ")),M(e,"vertical-timeline",e.is_published)),f=(h.appendChild(g),h.appendChild(document.createTextNode(" ")),w(e,e.is_published)),y=(h.appendChild(f),u.appendChild(h),n.appendChild(u),document.createElement("div"));return y.appendChild(n),y.innerHTML}catch(e){return console.error("Error displaying timeline:",e),P(e.message||"Unable to display timeline"),""}},e.display_timeline_items=async function(l){try{if(!l||!l.uuid)throw new Error("Invalid timeline item data");l.type="timelineitem";var m,r,p,o,c,s=document.createElement("tr"),u=(s.id=l.uuid+`_${l.type}_`+l.item_type,document.createElement("td")),h=(u.className="item-metadata",document.createElement("p")),_=document.createElement("button"),b=(_.className="btn btn-default",_.setAttribute("type","button"),j(l.item_type)),C=(_.appendChild(b),_.appendChild(document.createTextNode(" ")),document.createElement("small"));C.textContent="timeline item",_.appendChild(C),h.appendChild(_),1===l.is_locked&&(h.appendChild(document.createTextNode("  ")),m=z("fa fa-lock","Record is currently locked","exhibit-is-locked","#BA8E23"),h.appendChild(m)),u.appendChild(h);let t=helperModule.strip_html(helperModule.unescape(l.title||"")),i=null,e="";if("text"!==l.item_type){if(1===l.is_repo_item){var x,g=await helperMediaModule.get_repo_item_data(l.media);g&&(t=t||g.title,x=helperMediaModule.render_repo_thumbnail(g.thumbnail.data),i=J(x,"Repository item thumbnail"))}else if(1===l.is_kaltura_item){t=t||"Kaltura Item";var f=G(l.item_type);i=J(f,"Kaltura item thumbnail")}else if("image"===l.item_type){let e="";e=l.thumbnail&&0<l.thumbnail.length?V.exhibits.exhibit_media.get.endpoint.replace(":exhibit_id",encodeURIComponent(l.is_member_of_exhibit)).replace(":media",encodeURIComponent(l.thumbnail)):l.media&&0<l.media.length?V.exhibits.exhibit_media.get.endpoint.replace(":exhibit_id",encodeURIComponent(l.is_member_of_exhibit)).replace(":media",encodeURIComponent(l.media)):G("default"),i=J(e,t||"Item image")}else{var y=G(l.item_type);i=J(y,l.item_type+" thumbnail")}l.media&&0<l.media.length&&(e=l.media)}else e="Text only";(t=!t&&l.text&&0<l.text.length&&200<(t=helperModule.unescape(l.text)).length?t.substring(0,200)+"...":t)&&(r=document.createElement("p"),(p=document.createElement("strong")).textContent=t,r.appendChild(p),u.appendChild(r)),i&&u.appendChild(i),e&&(o=document.createElement("small"),(c=document.createElement("em")).textContent=e,o.appendChild(c),u.appendChild(o)),s.appendChild(u);var E,v,N,$=q("",""),I=($.style.width="5%",$.style.textAlign="center",l.date&&(v=(E=new Date(l.date)).getFullYear()+`-${(E.getMonth()+1).toString().padStart(2,"0")}-`+E.getDate().toString().padStart(2,"0"),(N=document.createElement("small")).textContent=v,$.appendChild(N)),s.appendChild($),q("","")),A=(I.style.width="5%",I.style.textAlign="center",document.createElement("small")),M=Y(l.uuid,l.is_published),w=(A.appendChild(M),I.appendChild(A),s.appendChild(I),document.createElement("td")),R=(w.id=l.uuid+"-item-actions",w.style.width="10%",document.createElement("div")),U=(R.className="card-text text-sm-center",encodeURIComponent(l.is_member_of_exhibit)),T=encodeURIComponent(l.is_member_of_timeline),k=encodeURIComponent(l.uuid);let d="",n="",a="";a=1===l.is_published?(d="text"===l.item_type?K+`/items/vertical-timeline/item/text/details?exhibit_id=${U}&timeline_id=${T}&item_id=`+k:K+`/items/vertical-timeline/item/media/details?exhibit_id=${U}&timeline_id=${T}&item_id=`+k,n="View details","fa fa-folder-open pr-1"):(d="text"===l.item_type?K+`/items/vertical-timeline/item/text/edit?exhibit_id=${U}&timeline_id=${T}&item_id=`+k:K+`/items/vertical-timeline/item/media/edit?exhibit_id=${U}&timeline_id=${T}&item_id=`+k,n="Edit timeline item","fa fa-edit pr-1");var L,S,B,D=F(d,n,n.toLowerCase().replace(" ","-"),a),H=(R.appendChild(D),R.appendChild(document.createTextNode(" ")),1===l.is_published?(L=z("fa fa-trash pr-1","Can only delete if unpublished","delete-disabled","#d3d3d3"),R.appendChild(L)):(S=K+`/items/vertical-timeline/item/delete?exhibit_id=${U}&timeline_id=${T}&item_id=`+k,B=F(S,"Delete timeline item","delete-timeline-item","fa fa-trash pr-1"),R.appendChild(B)),w.appendChild(R),s.appendChild(w),document.createElement("div"));return H.appendChild(s),H.innerHTML}catch(e){return console.error("Error displaying timeline item:",e),P(e.message||"Unable to display timeline item"),""}},e.init=function(){return console.log("Items list displays module initialized"),!0},e})();