let itemsEditGridFormModule=(()=>{let o=window.localStorage.getItem("exhibits_app_path"),l=endpointsModule.get_exhibits_endpoints();var e={};async function a(){var e=await(async()=>{try{var e,t=helperModule.get_parameter_by_name("exhibit_id"),a=helperModule.get_parameter_by_name("item_id"),r=authModule.get_user_token(),i=l.exhibits.grid_records.get.endpoint.replace(":exhibit_id",t).replace(":grid_id",a);return!1===r?(document.querySelector("#message").innerHTML="ERROR: Unable to get API endpoints",setTimeout(()=>{window.location.replace(o+"/exhibits-dashboard/auth")},1e3),!1):void 0!==(e=await httpModule.req({method:"GET",url:i,headers:{"Content-Type":"application/json","x-access-token":r}}))&&200===e.status?e.data.data[0]:void 0}catch(e){document.querySelector("#message").innerHTML=`<div class="alert alert-danger" role="alert"><i class="fa fa-exclamation"></i> ${e.message}</div>`}})(),t=e.created_by,a=new Date(e.created),r=e.updated_by,i=e.updated,i=new Date(i);let d="";a=helperModule.format_date(a),i=helperModule.format_date(i);return null!==t&&(d+=`<em>Created by ${t} on ${a}</em>`),null!==r&&(d+=` | <em>Last updated by ${r} on ${i}</em>`),document.querySelector("#created").innerHTML=d,document.querySelector("#grid-title-input").value=helperModule.unescape(e.title),document.querySelector("#grid-text-input").value=helperModule.unescape(e.text),document.querySelector("#grid-columns").value=e.columns,!1}return e.update_grid_record=async function(){try{window.scrollTo(0,0);var e=helperModule.get_parameter_by_name("exhibit_id"),t=helperModule.get_parameter_by_name("item_id"),a=itemsCommonStandardGridFormModule.get_common_grid_form_fields();if(void 0===e||void 0===t)return!(document.querySelector("#message").innerHTML='<div class="alert alert-warning" role="alert"><i class="fa fa-info"></i> Unable to update grid record.</div>');document.querySelector("#message").innerHTML='<div class="alert alert-info" role="alert"><i class="fa fa-info"></i> Updating grid record...</div>',a.updated_by=helperModule.get_user_name();var r=l.exhibits.grid_records.put.endpoint.replace(":exhibit_id",e).replace(":grid_id",t),i=authModule.get_user_token(),d=await httpModule.req({method:"PUT",url:r,data:a,headers:{"Content-Type":"application/json","x-access-token":i}});void 0!==d&&201===d.status&&(window.scrollTo(0,0),document.querySelector("#message").innerHTML='<div class="alert alert-success" role="alert"><i class="fa fa-info"></i> Grid record updated</div>',d.data.data,setTimeout(()=>{window.location.reload()},900))}catch(e){document.querySelector("#message").innerHTML=`<div class="alert alert-danger" role="alert"><i class="fa fa-exclamation"></i> ${e.message}</div>`}},e.init=async function(){var e=helperModule.get_parameter_by_name("exhibit_id"),t=helperModule.get_parameter_by_name("item_id");await authModule.check_permissions(["update_item","update_any_item"],"grid",e,null,"/items/grid/details?exhibit_id="+e+"&item_id="+t+"&status=403"),exhibitsModule.set_exhibit_title(e),document.querySelector("#save-item-btn").addEventListener("click",itemsEditGridFormModule.update_grid_record),await a()},e})();