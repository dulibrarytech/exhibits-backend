let exhibitsModule=(()=>{let p=window.localStorage.getItem("exhibits_app_path");var e={};let i;function m(e){var t,i,a=document.querySelector("#message");a?(a.textContent="",(t=document.createElement("div")).className="alert alert-danger",t.setAttribute("role","alert"),t.setAttribute("aria-live","polite"),t.setAttribute("aria-atomic","true"),(i=document.createElement("i")).className="fa fa-exclamation",i.setAttribute("aria-hidden","true"),t.appendChild(i),t.appendChild(document.createTextNode(" ")),i=document.createTextNode(e),t.appendChild(i),a.appendChild(t)):console.error("Message element #message not found in DOM")}function b(e,t){var i=document.createElement("td"),t=(i.style.width="4%",i.className="item-order",i.setAttribute("aria-label",t),document.createElement("span")),e=(t.style.paddingLeft="4px",new Date(e)),e=helperModule.format_date(e);return t.textContent=e,i.appendChild(t),i}function f(e,t,i,a){var n=document.createElement("i");return n.className=e,t&&n.setAttribute("title",t),i?n.setAttribute("aria-label",i):n.setAttribute("aria-hidden","true"),a&&(n.style.color=a),n}function x(e,t,i,a){var n=document.createElement("a");return n.href=e,t&&n.setAttribute("title",t),i&&n.setAttribute("aria-label",i),a&&(e=f(a,"","",""),n.appendChild(e),n.appendChild(document.createTextNode(" "))),n}function C(e,t,i){var a;e?(e.textContent="",(a=document.createElement("div")).className="alert alert-"+t,a.setAttribute("role","alert"),a.setAttribute("aria-live","polite"),a.setAttribute("aria-atomic","true"),t=f({info:"fa fa-info",success:"fa fa-check",danger:"fa fa-exclamation",warning:"fa fa-exclamation-triangle"}[t]||"fa fa-info","","",""),a.appendChild(t),a.appendChild(document.createTextNode(" ")),t=document.createTextNode(i),a.appendChild(t),e.appendChild(a)):console.error("Display message: element not found")}e.display_exhibits=async function(){try{var t=await(async()=>{var e=endpointsModule.get_exhibits_endpoints();if(!e?.exhibits?.exhibit_records?.endpoint)throw new Error("Exhibits endpoint configuration not available");var t=authModule.get_user_token();if(!t||"string"!=typeof t)throw new Error("Authentication token not available");if(403!==(e=await httpModule.req({method:"GET",url:e.exhibits.exhibit_records.endpoint,headers:{"Content-Type":"application/json","x-access-token":t},timeout:3e4,validateStatus:e=>200<=e&&e<600}))?.status)return e&&200===e.status?e.data&&Array.isArray(e.data.data)?e.data.data:(console.warn("Unexpected response data structure:",e.data),[]):void m(e?"Request failed with status "+e.status:"Unable to load exhibits. Please check your connection and try again.");m("You do not have permission to view exhibits")})();if(!1===t)return(o=document.querySelector("#exhibit-card"))&&(o.textContent=""),!1;if(void 0===t)return authModule.redirect_to_auth(),!1;if(!t||0===t.length)return(h=document.querySelector(".card"))&&(h.textContent=""),(s=document.querySelector("#message"))?(s.textContent="",(c=document.createElement("div")).className="alert alert-info",c.setAttribute("role","status"),c.setAttribute("aria-live","polite"),c.setAttribute("aria-atomic","true"),u=document.createTextNode("No Exhibits found."),c.appendChild(u),s.appendChild(c)):console.warn("Message element not found"),!1;var e=document.querySelector("#exhibits-data");if(!e)throw new Error("Table body element #exhibits-data not found");e.textContent="";var i=document.createDocumentFragment();for(let e=0;e<t.length;e++){d=t[e],l=void 0,(l=document.createElement("tr")).id=d.uuid,l.appendChild((e=>{var t=document.createElement("td"),i=(t.style.width="35%",(e=>{var t=document.createElement("p"),i=document.createElement("strong"),a=helperModule.strip_html(helperModule.unescape(e.title));return i.textContent=a,t.appendChild(i),1===e.is_featured&&(t.appendChild(document.createTextNode("  ")),a=f("fa fa-star","Featured","featured exhibit","#BA8E23"),t.appendChild(a)),1===e.is_locked&&(t.appendChild(document.createTextNode("  ")),i=f("fa fa-lock","Record is currently locked","exhibit-is-locked","#BA8E23"),t.appendChild(i)),t})(e)),i=(t.appendChild(i),(e=>{let t=document.createElement("p"),i=document.createElement("img"),a=p+"/static/images/image-tn.png",n;return n=e.thumbnail&&0<e.thumbnail.length?`${p}/api/v1/exhibits/${encodeURIComponent(e.uuid)}/media/`+encodeURIComponent(e.thumbnail):a,i.src=n,i.alt=e.uuid+" thumbnail",i.height=100,i.width=100,i.addEventListener("error",function(){this.src!==a&&(console.warn(`Thumbnail failed to load for exhibit ${e.uuid}, using default image`),this.src=a)}),t.appendChild(i),t})(e)),i=(t.appendChild(i),(e=>{let t=document.createElement("div"),i=(t.className="d-flex justify-content-between align-items-center",document.createElement("div")),a=(i.className="btn-group",document.createElement("span")),n=(a.id="preview-link",document.createElement("button")),r=(n.type="button",n.className="btn btn-sm btn-outline-secondary",n.setAttribute("aria-label","Preview exhibit"),document.createElement("i")),o=(r.className="menu-icon fa fa-eye",r.setAttribute("aria-hidden","true"),n.appendChild(r),n.appendChild(document.createTextNode(" ")),document.createElement("small")),d=(o.textContent="Preview",n.appendChild(o),p+"/preview?uuid="+encodeURIComponent(e.uuid)),l=(n.addEventListener("click",()=>{exhibitsModule.open_preview(d)}),a.appendChild(n),i.appendChild(a),i.appendChild(document.createTextNode("  ")),document.createElement("span")),s=(l.id="share-link",document.createElement("button")),c=(s.type="button",s.className="btn btn-sm btn-outline-secondary",s.setAttribute("aria-label","Share exhibit"),s.setAttribute("data-toggle","modal"),s.setAttribute("data-target",".shared-url-modal"),document.createElement("i")),u=(c.className="fa fa-share-alt",c.setAttribute("aria-hidden","true"),s.appendChild(c),s.appendChild(document.createTextNode(" ")),document.createElement("small"));return u.textContent="Share",s.appendChild(u),s.addEventListener("click",()=>{exhibitsModule.create_shared_preview_url(e.uuid)}),l.appendChild(s),i.appendChild(l),t.appendChild(i),t})(e)),i=(t.appendChild(i),(e=>{var t=document.createElement("p"),i=document.createElement("span"),a=(i.style.fontSize="x-small",document.createElement("em"));return a.textContent="Exhibit created by "+e,i.appendChild(a),t.appendChild(i),t})(e.created_by));return t.appendChild(i),t})(d)),l.appendChild((e=>{var t=document.createElement("td"),i=(t.style.width="5%",t.style.textAlign="center",document.createElement("small")),e=((e,t)=>{var i=document.createElement("a"),e=(i.href="#",i.id=e+"-status",i.setAttribute("aria-label","Toggle publication status"),document.createElement("span"));return 1===t?(i.className="suppress-exhibit",e.id="suppress",e.setAttribute("title","published"),(t=document.createElement("i")).className="fa fa-cloud",t.style.color="green",t.setAttribute("aria-hidden","true"),e.appendChild(t),e.appendChild(document.createElement("br")),e.appendChild(document.createTextNode("Published"))):(i.className="publish-exhibit",e.id="publish",e.setAttribute("title","suppressed"),(t=document.createElement("i")).className="fa fa-cloud-upload",t.style.color="darkred",t.setAttribute("aria-hidden","true"),e.appendChild(t),e.appendChild(document.createElement("br")),e.appendChild(document.createTextNode("Unpublished"))),i.appendChild(e),i})(e.uuid,e.is_published);return i.appendChild(e),t.appendChild(i),t})(d)),l.appendChild((e=>{var t=document.createElement("td"),i=(t.style.width="10%",document.createElement("div")),a=(i.className="card-text text-sm-center",i.id=e.uuid+"-actions",x(p+"/items?exhibit_id="+encodeURIComponent(e.uuid),"View Exhibit Items","view-exhibit-items","fa fa-list"));return a.classList.add("pr-1"),i.appendChild(a),i.appendChild(document.createTextNode(" ")),1===e.is_published?((a=x(p+"/exhibits/exhibit/details?exhibit_id="+encodeURIComponent(e.uuid),"View details","exhibit-details","fa fa-folder-open")).classList.add("pr-1"),i.appendChild(a),i.appendChild(document.createTextNode(" ")),(a=document.createElement("i")).className="fa fa-trash pr-1",a.setAttribute("title","Can only delete if unpublished"),a.setAttribute("aria-label","delete-exhibit"),a.style.color="#d3d3d3",i.appendChild(a)):((a=x(p+"/exhibits/exhibit/edit?exhibit_id="+encodeURIComponent(e.uuid),"Edit","edit-exhibit","fa fa-edit")).classList.add("pr-1"),i.appendChild(a),i.appendChild(document.createTextNode(" ")),(a=x(p+"/exhibits/exhibit/delete?exhibit_id="+encodeURIComponent(e.uuid),"Delete exhibit","delete-exhibit","fa fa-trash")).classList.add("pr-1"),i.appendChild(a)),t.appendChild(i),t})(d)),l.appendChild(b(d.created,"exhibit-created")),l.appendChild(b(d.updated,"exhibit-updated"));var a=l;i.appendChild(a)}e.appendChild(i);var n=(()=>{try{if(document.querySelector("#exhibits"))return new DataTable("#exhibits",{paging:!0,order:[[4,"desc"]],rowReorder:!1,language:{bottomEnd:{paging:{firstLast:!1}}}});throw new Error("Table element #exhibits not found")}catch(e){throw console.error("Error initializing DataTable:",e),e}})();if(n)try{n.on("click","tbody tr .publish-exhibit",async e=>{e.preventDefault();e=e.currentTarget.getAttribute("id");e?await y(e):console.error("No UUID found on publish button")}),n.on("click","tbody tr .suppress-exhibit",async e=>{e.preventDefault();e=e.currentTarget.getAttribute("id");e?await v(e):console.error("No UUID found on suppress button")})}catch(e){console.error("Error binding DataTable events:",e)}else console.error("DataTable instance not provided");try{var r=helperModule.get_parameter_by_name("exhibit_id");if(null!==r&&""!==r){history.replaceState({},"",p+"/exhibits"),history.pushState({},"",p+"/exhibits");let e=document.getElementById(r);e?(e.scrollIntoView({behavior:"smooth",block:"center"}),e.style.backgroundColor="#fffacd",setTimeout(()=>{e.style.backgroundColor=""},2e3)):console.warn(`Exhibit with ID ${r} not found in DOM`)}}catch(e){console.error("Error handling exhibit_id parameter:",e)}return!0}catch(e){console.error("Error displaying exhibits:",e);var o=document.querySelector("#message");return o&&C(o,"danger",E(e)),!1}var d,l,s,c,u,h},e.get_exhibit_title=async function(e){var t=endpointsModule.get_exhibits_endpoints(),i=authModule.get_user_token(),t=await httpModule.req({method:"GET",url:t.exhibits.exhibit_records.endpoints.get.endpoint.replace(":exhibit_id",e),headers:{"Content-Type":"application/json","x-access-token":i},validateStatus:e=>200<=e&&e<600});if(403!==t?.status)return void 0!==t&&200===t.status?helperModule.strip_html(helperModule.unescape(t.data.data.title)):void(void 0===t&&(e=document.querySelector("#message"))&&C(e,"danger","Unable to load exhibit title. Please check your connection and try again."));(i=document.querySelector("#message"))&&C(i,"danger","You do not have permission to view this exhibit")},e.set_exhibit_title=async function(e){e=await exhibitsModule.get_exhibit_title(e);return document.querySelector("#exhibit-title").innerHTML=""+e,!1},e.open_preview=function(e){scrollTo(0,0);let t=authModule.get_user_token();void 0!==i&&exhibitsModule.close_preview(),document.querySelector("#message").innerHTML='<div class="alert alert-info" role="alert"><i class="fa fa-info-circle"></i> Building Exhibit Preview...</div>',setTimeout(()=>{i=window.open(e+"&t="+t,"_blank","location=yes,scrollbars=yes,status=yes"),document.querySelector("#message").innerHTML=""},900)},e.close_preview=function(){i.close()},e.delete_exhibit=async function(){var e=document.querySelector("#message"),t=document.querySelector("#delete-message"),i=document.querySelector("#delete-card"),t=(t&&(t.textContent="Deleting exhibit..."),endpointsModule.get_exhibits_endpoints()),a=helperModule.get_parameter_by_name("exhibit_id"),n=authModule.get_user_token(),t=await httpModule.req({method:"DELETE",url:t.exhibits.exhibit_records.endpoints.delete.endpoint.replace(":exhibit_id",a),headers:{"Content-Type":"application/json","x-access-token":n},validateStatus:e=>200<=e&&e<600});return 403===t?.status?(scrollTo(0,0),i&&(i.textContent=""),e&&C(e,"danger","You do not have permission to delete this record")):void 0!==t&&204===t.status?setTimeout(()=>{window.location.replace(p+"/exhibits")},900):void 0!==t&&200===t.status?(scrollTo(0,0),i&&(i.textContent=""),e&&C(e,"warning","Cannot delete an exhibit that contains items")):void 0===t&&(scrollTo(0,0),i&&(i.textContent=""),e)&&C(e,"danger","Unable to delete exhibit. Please check your connection and try again."),!1};let o={STATUS_SUFFIX:"-status",ACTIONS_SUFFIX:"-actions",MESSAGE_DURATION:5e3,HTTP_OK:200,HTTP_NO_CONTENT:204,HTTP_FORBIDDEN:403,HTTP_UNPROCESSABLE_ENTITY:422,UUID_PATTERN:/^[a-f0-9-]+$/i},r={PUBLISHED:{span_id:"suppress",title:"published",icon_class:"fa fa-cloud",icon_color:"green",text:"Published",css_class_to_add:"suppress-exhibit",css_class_to_remove:"publish-exhibit",click_handler:v,actions:(e,t)=>[{href:e+"/items?exhibit_id="+t,title:"View Exhibit Items",icon:"fa fa-list pr-1",label:"view-items"},{href:e+"/exhibits/exhibit/details?exhibit_id="+t,title:"View details",icon:"fa fa-folder-open pr-1",label:"exhibit-details"},{type:"disabled-trash"}]},SUPPRESSED:{span_id:"publish",title:"suppressed",icon_class:"fa fa-cloud-upload",icon_color:"darkred",text:"Unpublished",css_class_to_add:"publish-exhibit",css_class_to_remove:"suppress-exhibit",click_handler:y,actions:(e,t)=>[{href:e+"/items?exhibit_id="+t,title:"View Exhibit Items",icon:"fa fa-list pr-1",label:"view-items"},{href:e+"/exhibits/exhibit/edit?exhibit_id="+t,title:"Edit",icon:"fa fa-edit pr-1",label:"edit-exhibit"},{href:e+"/exhibits/exhibit/delete?exhibit_id="+t,title:"Delete exhibit",icon:"fa fa-trash pr-1",label:"delete-exhibit"}]}};function d(e){if(!e||"string"!=typeof e)throw new Error("Invalid exhibit UUID provided");e=e.replace(o.STATUS_SUFFIX,"");if(o.UUID_PATTERN.test(e))return e;throw new Error("Invalid UUID format")}function l(e){if(!e)throw new Error("Authentication token not available")}async function s(e,t,i){return httpModule.req({method:"POST",url:e.replace(":exhibit_id",t),headers:{"Content-Type":"application/json","x-access-token":i},validateStatus:e=>200<=e&&e<600})}function c(e,t){var i=document.getElementById(e);if(i){for(i.classList.remove(t.css_class_to_remove),i.classList.add(t.css_class_to_add);i.firstChild;)i.removeChild(i.firstChild);var a=document.createElement("span"),n=(a.id=t.span_id,a.title=t.title,document.createElement("i")),r=(n.className=t.icon_class,n.style.color=t.icon_color,n.setAttribute("aria-hidden","true"),document.createElement("br")),t=document.createTextNode(t.text);a.appendChild(n),a.appendChild(r),a.appendChild(t),i.appendChild(a)}else console.warn("Status element not found: "+e)}function u(e,t){var i=""+e+o.ACTIONS_SUFFIX;let a=document.getElementById(i);if(a){for(;a.firstChild;)a.removeChild(a.firstChild);var e=encodeURIComponent(e),n=void 0!==p?p:"";let o=t.actions(n,e),d=[];o.forEach((e,t)=>{var i,a,n,r;"disabled-trash"===e.type?d.push(((r=document.createElement("i")).className="fa fa-trash pr-1",r.title="Can only delete if unpublished",r.style.color="#d3d3d3",r.setAttribute("aria-label","delete-exhibit"),r.setAttribute("aria-disabled","true"),r.setAttribute("aria-hidden","true"),r)):d.push((r=e.href,i=e.title,a=e.icon,e=e.label,(n=document.createElement("a")).href=r,n.title=i,n.setAttribute("aria-label",e),(r=document.createElement("i")).className=a,r.setAttribute("aria-hidden","true"),n.appendChild(r),n)),t<o.length-1&&d.push(document.createTextNode(" "))}),d.forEach(e=>a.appendChild(e))}else console.warn("Actions element not found: "+i)}async function y(e){try{var t=d(e),i=endpointsModule.get_exhibits_endpoints(),a=authModule.get_user_token(),n=(l(a),await s(i.exhibits.exhibit_publish.post.endpoint,t,a));return n?.status===o.HTTP_FORBIDDEN?h("danger","You do not have permission to publish this record"):n?.status===o.HTTP_UNPROCESSABLE_ENTITY?h("warning","Exhibit must contain at least one item to publish"):n?.status===o.HTTP_OK?(c(e,r.PUBLISHED),u(t,r.PUBLISHED)):n||h("danger","Unable to publish exhibit. Please check your connection and try again."),!1}catch(e){return console.error("Error publishing exhibit:",e),h("danger",E(e)),!1}}async function v(e){try{var t=d(e),i=endpointsModule.get_exhibits_endpoints(),a=authModule.get_user_token(),n=(l(a),await s(i.exhibits.exhibit_suppress.post.endpoint,t,a));return n?.status===o.HTTP_FORBIDDEN?h("danger","You do not have permission to unpublish this record"):n?.status===o.HTTP_OK?(c(e,r.SUPPRESSED),u(t,r.SUPPRESSED)):n||h("danger","Unable to unpublish exhibit. Please check your connection and try again."),!1}catch(e){return console.error("Error suppressing exhibit:",e),h("danger",E(e)),!1}}function h(t,i,a=o.MESSAGE_DURATION){let n=document.querySelector("#message");if(n){for(window.scrollTo({top:0,behavior:"smooth"});n.firstChild;)n.removeChild(n.firstChild);let e=document.createElement("div");e.className="alert alert-"+t,e.setAttribute("role","alert");var r=document.createElement("i"),t=(r.className="warning"===t?"fa fa-warning":"fa fa-exclamation-circle",r.setAttribute("aria-hidden","true"),document.createTextNode(" "+i));e.appendChild(r),e.appendChild(t),n.appendChild(e),setTimeout(()=>{n.firstChild===e&&n.removeChild(e)},a)}else console.error("Message container not found")}function g(e){try{var t=new URL(e);return"http:"===t.protocol||"https:"===t.protocol}catch(e){}}function a(e,t){_(e,"info",t,"fa-info-circle")}function n(e,t){_(e,"danger",t,"fa-exclamation-circle")}function _(e,t,i,a){var n=document.querySelector(e);if(n){for(;n.firstChild;)n.removeChild(n.firstChild);var r=document.createElement("div"),t=(r.className="alert alert-"+t,r.setAttribute("role","alert"),document.createElement("i")),a=(t.className="fa "+a,t.setAttribute("aria-hidden","true"),document.createTextNode(" "+i));r.appendChild(t),r.appendChild(a),n.appendChild(r)}else console.error("Container not found: "+e)}function E(e){if(!e||!e.message)return"An unexpected error occurred. Please try again.";var t,i,a=e.message.toLowerCase();for([t,i]of Object.entries({network:"Network error. Please check your connection and try again.",timeout:"Request timed out. Please try again.",token:"Session expired. Please log in again.",auth:"Authentication failed. Please log in again.",permission:"You do not have permission to access this resource.","not found":"The requested resource was not found.",clipboard:"Unable to copy to clipboard. Please try again.",copy:"Unable to copy to clipboard. Please try again.",url:"Invalid URL. Please try again."}))if(a.includes(t))return i;return"An error occurred. Please try again."}return e.create_shared_preview_url=async function(e){if(e&&"string"==typeof e)if(/^[a-f0-9-]+$/i.test(e)){a("#shared-url","Generating Shared URL...");var t=endpointsModule.get_exhibits_endpoints(),i=authModule.get_user_token();if(i&&!1!==i){e=encodeURIComponent(e),t=await httpModule.req({method:"POST",url:t.exhibits.exhibit_shared.get.endpoint+"?uuid="+e,headers:{"Content-Type":"application/json","x-access-token":i},validateStatus:e=>200<=e&&e<600});if(t?.status===o.HTTP_FORBIDDEN)n("#shared-url","You do not have permission to create a shared URL for this exhibit");else if(201===t?.status&&t.data?.shared_url){if(!g(t.data.shared_url))return n("#shared-url","Invalid shared URL received from server"),!1;e=document.querySelector("#shared-url-copy");e&&(e.textContent=t.data.shared_url),setTimeout(()=>{var e=7,t=document.querySelector("#shared-url");if(t){for(;t.firstChild;)t.removeChild(t.firstChild);var i=document.createElement("div"),a=(i.className="d-flex align-items-center",document.createElement("p")),n=document.createTextNode("- Shared URL created.  "),n=(a.appendChild(n),document.createElement("button")),r=(n.type="button",n.className="btn btn-sm btn-primary",n.setAttribute("aria-label","Copy shared URL"),n.addEventListener("click",e=>{e.preventDefault(),void 0!==exhibitsModule&&"function"==typeof exhibitsModule.copy?exhibitsModule.copy():console.error("exhibitsModule.copy is not available")}),document.createElement("i")),o=(r.className="fa fa-copy",r.setAttribute("aria-hidden","true"),document.createTextNode(" Copy")),r=(n.appendChild(r),n.appendChild(o),a.appendChild(n),document.createElement("br")),o=(a.appendChild(r),document.createTextNode(`- Shared URL expires in ${e} days.`));a.appendChild(o),i.appendChild(a),t.appendChild(i)}else console.error("Shared URL container not found")},900)}else a("#shared-url",t?.data?.message||"Failed to create shared URL")}else setTimeout(()=>{a("#message","Unable to get session token"),authModule.logout()},1e3)}else a("#shared-url","Invalid UUID format");else a("#shared-url","Invalid exhibit UUID provided");return!1},e.copy=async function(){var i="#copy-message";try{var t=document.querySelector("#shared-url-copy");if(!t)throw new Error("Shared URL element not found");var a=t.textContent.trim();if(!a)throw new Error("No URL available to copy");if(!g(a))throw new Error("Invalid URL format");await(async e=>{if(navigator.clipboard&&navigator.clipboard.writeText)try{return void await navigator.clipboard.writeText(e)}catch(e){console.warn("Clipboard API failed, trying fallback:",e)}var t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.top="-9999px",t.style.left="-9999px",t.style.opacity="0",t.setAttribute("readonly",""),t.setAttribute("aria-hidden","true"),document.body.appendChild(t);try{if(t.select(),t.setSelectionRange(0,e.length),!document.execCommand("copy"))throw new Error("Copy command was unsuccessful")}finally{document.body.removeChild(t)}})(a);{var n=i;var r=5e3;let t=document.querySelector(n);if(t){for(;t.firstChild;)t.removeChild(t.firstChild);let e=document.createElement("div");e.className="alert alert-info",e.setAttribute("role","alert");var o=document.createElement("i"),d=(o.className="fa fa-info-circle",o.setAttribute("aria-hidden","true"),document.createTextNode(" URL copied to clipboard!"));e.appendChild(o),e.appendChild(d),t.appendChild(e),setTimeout(()=>{t.firstChild===e&&t.removeChild(e)},r)}else console.warn("Copy message container not found: "+n);return}}catch(e){console.error("Error copying to clipboard:",e);var t=i,a=E(e),l=document.querySelector(t);if(l){for(;l.firstChild;)l.removeChild(l.firstChild);r=document.createElement("div"),n=(r.className="alert alert-danger",r.setAttribute("role","alert"),document.createElement("i")),a=(n.className="fa fa-exclamation-circle",n.setAttribute("aria-hidden","true"),a||"Failed to copy URL to clipboard"),a=document.createTextNode(" "+a);r.appendChild(n),r.appendChild(a),l.appendChild(r)}else console.error("Copy message container not found: "+t)}},e.init=async function(){try{var t=authModule.get_user_token();if(t&&!1!==t)if(await authModule.check_auth(t)){try{await exhibitsModule.display_exhibits()}catch(e){throw console.error("Error displaying exhibits:",e),new Error("Failed to load exhibits. Please refresh the page.")}await 0;try{"undefined"!=typeof helperModule&&"function"==typeof helperModule.show_form?helperModule.show_form():console.warn("helperModule.show_form is not available"),"undefined"!=typeof navModule&&"function"==typeof navModule.set_logout_link?navModule.set_logout_link():console.warn("navModule.set_logout_link is not available")}catch(e){console.error("Error initializing UI components:",e)}}else console.warn("Authentication check failed"),authModule.logout();else console.warn("No authentication token available"),authModule.logout()}catch(e){console.error("Error initializing exhibits module:",e);var t=e,i=document.querySelector("#message");if(i){for(;i.firstChild;)i.removeChild(i.firstChild);var a=document.createElement("div"),n=(a.className="alert alert-danger",a.setAttribute("role","alert"),document.createElement("i")),t=(n.className="fa fa-exclamation-circle",n.setAttribute("aria-hidden","true"),E(t)),t=document.createTextNode(" "+t);a.appendChild(n),a.appendChild(t),i.appendChild(a)}else console.error("Message container not found, cannot display error to user")}},e})();