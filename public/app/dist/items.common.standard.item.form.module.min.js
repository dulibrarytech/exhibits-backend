let itemsCommonStandardItemFormModule=(()=>{let a=endpointsModule.get_exhibits_endpoints();var e={get_common_standard_item_form_fields:function(){try{var e={styles:{}};if(e.title=document.querySelector("#item-title-input").value,e.text=document.querySelector("#item-text-input").value,-1!==window.location.pathname.indexOf("text")&&0===e.text.length)return!(document.querySelector("#message").innerHTML='<div class="alert alert-danger" role="alert"><i class="fa fa-exclamation"></i> Please enter "Text" for this item</div>');if(null!==document.querySelector("#is-published")&&(e.is_published=document.querySelector("#is-published").value),-1!==window.location.pathname.indexOf("media")){var t=[];if(e.caption=document.querySelector("#item-caption-input").value,e.pdf_open_to_page=document.querySelector("#pdf-open-to-page").value,e.is_alt_text_decorative=document.querySelector("#is-alt-text-decorative").checked,e.is_embedded=document.querySelector("#embed-item").checked,e.media_padding=document.querySelector("#media-padding").checked,e.wrap_text=document.querySelector("#wrap-text").checked,!0===e.wrap_text?e.wrap_text=1:!1===e.wrap_text&&(e.wrap_text=0),!0===e.is_embedded?e.is_embedded=1:!1===e.is_embedded&&(e.is_embedded=0),!0===e.media_padding?e.media_padding=0:!1===e.media_padding&&(e.media_padding=1),e.thumbnail=document.querySelector("#item-thumbnail").value,e.thumbnail_prev=document.querySelector("#item-thumbnail-image-prev").value,e.item_type=document.querySelector("#item-type").value,e.mime_type=document.querySelector("#item-mime-type").value,e.media=document.querySelector("#item-media").value,e.media_prev=document.querySelector("#item-media-prev").value,e.kaltura=document.querySelector("#audio-video").value,e.repo_uuid=document.querySelector("#repo-uuid").value,e.is_repo_item=parseInt(document.querySelector("#is-repo-item").value),e.is_kaltura_item=parseInt(document.querySelector("#is-kaltura-item").value),-1!==e.mime_type.indexOf("image"))if(!0===e.is_alt_text_decorative)e.is_alt_text_decorative=1,e.alt_text="";else if(!1===e.is_alt_text_decorative&&(e.is_alt_text_decorative=0,e.alt_text=document.querySelector("#item-alt-text-input").value,0===e.alt_text.length)&&0===e.alt_text.length&&0===e.alt_text.length)return!(document.querySelector("#message").innerHTML='<div class="alert alert-danger" role="alert"><i class="fa fa-exclamation"></i> Please enter "alt text" for this item</div>');if(0===e.media.length&&0===e.kaltura.length&&0===e.repo_uuid.length&&0===e.text.length)return!(document.querySelector("#message").innerHTML='<div class="alert alert-danger" role="alert"><i class="fa fa-exclamation"></i> Please upload or import a media item</div>');if(0<e.media.length&&0<e.repo_uuid.length&&e.media===e.repo_uuid&&(e.repo_uuid=""),0<e.media.length&&0<e.kaltura.length&&e.media===e.kaltura&&(e.kaltura=""),0<e.media.length&&t.push(e.media),0<e.kaltura.length&&(t.push(e.kaltura),e.item_type="kaltura"),0<e.repo_uuid.length&&t.push(e.repo_uuid),1<t.length)return!(document.querySelector("#message").innerHTML='<div class="alert alert-danger" role="alert"><i class="fa fa-exclamation"></i> Please upload or import only one media item</div>');"kaltura"===e.item_type&&(e.item_type=document.querySelector('input[name="item_type"]:checked').value)}else e.item_type="text";e.layout=helperModule.get_checked_radio_button(document.getElementsByName("layout")),e.media_width=helperModule.get_checked_radio_button(document.getElementsByName("media_width"));var a=document.querySelector("#item-background-color").value,r=document.querySelector("#item-font-color").value,l=document.querySelector("#item-font").value,i=document.querySelector("#item-font-size").value;return 0<a.length&&(e.styles.backgroundColor=a),0<r.length&&(e.styles.color=document.querySelector("#item-font-color").value),0<l.length&&(e.styles.fontFamily=l),0<i.length&&(e.styles.fontSize=i+"px"),e}catch(e){document.querySelector("#message").innerHTML=`<div class="alert alert-danger" role="alert"><i class="fa fa-exclamation"></i> ${e.message}</div>`}}};return e.delete_media=function(){try{(async()=>{var e=document.querySelector("#item-media").value,t=authModule.get_user_token();void 0!==(e=await httpModule.req({method:"DELETE",url:a.exhibits.media.delete.endpoint+"?media="+e,headers:{"Content-Type":"application/json","x-access-token":t}}))&&204===e.status&&(document.querySelector("#item-type").value="",document.querySelector("#item-mime-type").value="",document.querySelector("#item-media").value="",document.querySelector("#item-media-thumbnail-image-display").innerHTML="",document.querySelector("#item-media-filename-display").innerHTML="",document.querySelector("#item-media-trash").style.display="none",document.querySelector("#message").innerHTML='<div class="alert alert-success" role="alert"><i class="fa fa-info"></i> Media deleted</div>',document.querySelector("#toggle-open-to-page").style.visibility="hidden",document.querySelector("#image-alt-text").style.display="none",setTimeout(()=>{document.querySelector("#message").innerHTML=""},3e3))})()}catch(e){document.querySelector("#message").innerHTML=`<div class="alert alert-danger" role="alert"><i class="fa fa-exclamation"></i> ${e.message}</div>`}return!1},e.delete_thumbnail_image=function(){try{(async()=>{var e=document.querySelector("#item-thumbnail").value,t=authModule.get_user_token();void 0!==(e=await httpModule.req({method:"DELETE",url:a.exhibits.media.delete.endpoint+"?media="+e,headers:{"Content-Type":"application/json","x-access-token":t}}))&&204===e.status&&(document.querySelector("#item-thumbnail").value="",document.querySelector("#item-thumbnail-image-display").innerHTML="",document.querySelector("#item-thumbnail-filename-display").innerHTML="",document.querySelector("#item-thumbnail-trash").style.display="none",document.querySelector("#item-media-thumbnail-image-display").innerHTML="",document.querySelector("#message").innerHTML='<div class="alert alert-success" role="alert"><i class="fa fa-info"></i> Thumbnail image deleted</div>',setTimeout(()=>{document.querySelector("#message").innerHTML=""},3e3))})()}catch(e){document.querySelector("#message").innerHTML=`<div class="alert alert-danger" role="alert"><i class="fa fa-exclamation"></i> ${e.message}</div>`}return!1},e.init=async function(){try{-1!==window.location.pathname.indexOf("media")&&(uploadsModule.upload_item_media(),uploadsModule.upload_item_thumbnail(),document.querySelector("#item-media-trash").style.display="none",document.querySelector("#item-thumbnail-trash").style.display="none",document.querySelector("#is-media-only-caption").style.display="block",setTimeout(()=>{document.querySelector("#item-thumbnail-trash").addEventListener("click",itemsCommonStandardItemFormModule.delete_thumbnail_image),document.querySelector("#item-media-trash").addEventListener("click",itemsCommonStandardItemFormModule.delete_media)},1e3),document.querySelector("#repo-uuid-btn").addEventListener("click",async()=>{await helperModule.get_repo_item_data(null)}),document.querySelector("#audio-video").addEventListener("focusout",()=>{helperModule.clear_media_fields("kaltura_media"),document.querySelector("#is-kaltura-item").value=1})),-1!==window.location.pathname.indexOf("text")&&(document.querySelector("#is-required-text").innerHTML='<span style="color: darkred">*</span> Text<small><em>(Required)</em></small>');var e=authModule.get_user_token();await authModule.check_auth(e),navModule.init(),navModule.back_to_items(),navModule.set_preview_link(),document.querySelector("#item-background-color-picker").addEventListener("input",()=>{document.querySelector("#item-background-color")&&(document.querySelector("#item-background-color").value=document.querySelector("#item-background-color-picker").value)}),document.querySelector("#item-background-color").addEventListener("input",()=>{document.querySelector("#item-background-color-picker").value=document.querySelector("#item-background-color").value}),document.querySelector("#item-font-color-picker").addEventListener("input",()=>{document.querySelector("#item-font-color")&&(document.querySelector("#item-font-color").value=document.querySelector("#item-font-color-picker").value)}),document.querySelector("#item-font-color").addEventListener("input",()=>{document.querySelector("#item-font-color-picker").value=document.querySelector("#item-font-color").value}),helperModule.show_form()}catch(e){document.querySelector("#message").innerHTML=`<div class="alert alert-danger" role="alert"><i class="fa fa-exclamation"></i> ${e.message}</div>`}},e})();