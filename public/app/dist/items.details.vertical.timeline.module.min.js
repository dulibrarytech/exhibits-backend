let itemsDetailsVerticalTimelineModule=(()=>{let m=window.localStorage.getItem("exhibits_app_path"),p=endpointsModule.get_exhibits_endpoints();var e={};async function t(){let e=e=>e instanceof Date&&!isNaN(e.getTime());var t,a,r,n,i,d,o,l,c;try{var s,u=await(async()=>{var e,t,a=document.querySelector("#message"),r=(e,t,a)=>{var r,n;e&&(t=["info","success","danger","warning"].includes(t)?t:"danger",(r=document.createElement("div")).className="alert alert-"+t,r.setAttribute("role","alert"),(n=document.createElement("i")).className=(e=>{const t={info:"fa fa-info",success:"fa fa-check",danger:"fa fa-exclamation",warning:"fa fa-exclamation-triangle"};return t[e]||"fa fa-exclamation"})(t),r.appendChild(n),t=document.createTextNode(" "+a),r.appendChild(t),e.textContent="",e.appendChild(r))};try{var n=helperModule.get_parameter_by_name("exhibit_id"),i=helperModule.get_parameter_by_name("item_id"),d=(t=i,(e=n)&&t?255<e.length||255<t.length?{valid:!1,error:"Invalid parameter length"}:{valid:!0}:{valid:!1,error:"Missing required parameters: exhibit_id or timeline_id"});if(!d.valid)return r(a,"danger",d.error),null;var o=authModule.get_user_token();if(!o||!1===o)return r(a,"danger","Authentication required. Redirecting..."),setTimeout(()=>{var e=m+"/exhibits-dashboard/auth";window.location.replace(e)},3e3),null;if(!p?.exhibits?.timeline_records?.get?.endpoint)return r(a,"danger","API endpoint configuration missing"),null;var l=p.exhibits.timeline_records.get.endpoint.replace(":exhibit_id",encodeURIComponent(n)).replace(":timeline_id",encodeURIComponent(i)),c=await httpModule.req({method:"GET",url:l,headers:{"Content-Type":"application/json","x-access-token":o},timeout:3e4});if(!c)throw new Error("No response received from server");if(200!==c.status)throw new Error("Server returned status "+c.status);if(c.data?.data)return c.data.data;throw new Error("Invalid response structure")}catch(e){return console.error("Error in get_timeline_record:",e),r(a,"danger",e.user_message||"Unable to load the timeline record. Please try again."),null}})();if(u)return s={created:document.querySelector("#created"),timeline_title:document.querySelector("#timeline-title-input"),timeline_text:document.querySelector("#timeline-text-input")},i=u,(d=s.created)&&i&&(o=[],i.created_by&&i.created&&(c=new Date(i.created),e(c))&&(c=helperModule.format_date(c),(l=document.createElement("em")).textContent=`Created by ${i.created_by} on `+c,o.push(l)),i.updated_by&&i.updated&&(c=new Date(i.updated),e(c))&&(l=helperModule.format_date(c),(c=document.createElement("em")).textContent=`Last updated by ${i.updated_by} on `+l,o.push(c)),d.textContent="",o.forEach((e,t)=>{0<t&&d.appendChild(document.createTextNode(" | ")),d.appendChild(e)})),r=u.title,(n=s.timeline_title)&&(r=r?helperModule.unescape(r):"",n.value=r),t=u.text,(a=s.timeline_text)&&(t=t?helperModule.unescape(t):"",a.value=t),!1;throw new Error("Failed to load timeline record data")}catch(e){return console.error("Error in display_details_record:",e),i="Unable to display the timeline record. Please try again.",(l=document.querySelector("#message"))&&((c=document.createElement("div")).className="alert alert-danger",c.setAttribute("role","alert"),(o=document.createElement("i")).className="fa fa-exclamation",c.appendChild(o),o=document.createTextNode(" "+i),c.appendChild(o),l.textContent="",l.appendChild(c)),!1}}return e.init=async function(){var e=helperModule.get_parameter_by_name("status"),e=(null!==e&&"403"===e&&(document.querySelector("#message").innerHTML='<div class="alert alert-danger" role="alert"><i class="fa fa-exclamation"></i> You do not have permission to edit this record.</div>'),helperModule.get_parameter_by_name("exhibit_id"));exhibitsModule.set_exhibit_title(e),await t()},e})();