let itemsAddHeadingFormModule=(()=>{let d=window.localStorage.getItem("exhibits_app_path"),n=endpointsModule.get_exhibits_endpoints();var e={create_heading_record:async function(){try{window.scrollTo(0,0);let e=helperModule.get_parameter_by_name("exhibit_id");if(void 0===e)return!(document.querySelector("#message").innerHTML='<div class="alert alert-warning" role="alert"><i class="fa fa-info"></i> Unable to create item heading record.</div>');document.querySelector("#message").innerHTML='<div class="alert alert-info" role="alert"><i class="fa fa-info"></i> Creating item heading record...</div>';var t=itemsCommonHeadingFormModule.get_common_heading_form_fields();if(!1===t||void 0===t)return!(document.querySelector("#message").innerHTML='<div class="alert alert-danger" role="alert"><i class="fa fa-info"></i> Heading item data could not be created</div>');var i=JSON.parse(sessionStorage.getItem("exhibits_user"));if(null===i.name)return!(document.querySelector("#message").innerHTML='<div class="alert alert-danger" role="alert"><i class="fa fa-exclamation"></i> Unable to retrieve your name</div>');t.created_by=i.name,t.owner=parseInt(i.uid);var r=authModule.get_user_token();let a=await httpModule.req({method:"POST",url:n.exhibits.heading_records.post.endpoint.replace(":exhibit_id",e),data:t,headers:{"Content-Type":"application/json","x-access-token":r}});void 0!==a&&201===a.status?(document.querySelector("#message").innerHTML='<div class="alert alert-success" role="alert"><i class="fa fa-info"></i> Heading record created</div>',setTimeout(()=>{window.location.replace(`${d}/items/heading/edit?exhibit_id=${e}&item_id=`+a.data.data)},900)):void 0===a&&(document.querySelector("#message").innerHTML='<div class="alert alert-danger" role="alert"><i class="fa fa-exclamation"></i> You do not have permission to add item to this exhibit.</div>')}catch(e){document.querySelector("#message").innerHTML=`<div class="alert alert-danger" role="alert"><i class="fa fa-exclamation"></i> ${e.message}</div>`}},init:async function(){var e=helperModule.get_parameter_by_name("exhibit_id");await authModule.check_permissions(["add_item","add_item_to_any_exhibit"],"heading_item",e,"/items?exhibit_id="+e+"&status=403"),exhibitsModule.set_exhibit_title(exhibit_id),document.querySelector("#save-heading-btn").addEventListener("click",itemsAddHeadingFormModule.create_heading_record)}};return e})();