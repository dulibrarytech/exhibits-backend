let itemsDetailsGridItemModule=(()=>{let y=window.localStorage.getItem("exhibits_app_path"),h=endpointsModule.get_exhibits_endpoints();var e={};async function t(){var t=await(async()=>{try{var e,t=helperModule.get_parameter_by_name("exhibit_id"),i=helperModule.get_parameter_by_name("grid_id"),a=helperModule.get_parameter_by_name("item_id"),o=authModule.get_user_token(),d=h.exhibits.grid_item_record.get.endpoint.replace(":exhibit_id",t).replace(":grid_id",i).replace(":item_id",a);return!1===o?(document.querySelector("#message").innerHTML="ERROR: Unable to get API endpoints",setTimeout(()=>{window.location.replace(y+"/exhibits-dashboard/auth")},1e3),!1):void 0!==(e=await httpModule.req({method:"GET",url:d,headers:{"Content-Type":"application/json","x-access-token":o}}))&&200===e.status?e.data.data[0]:void 0}catch(e){document.querySelector("#message").innerHTML=`<div class="alert alert-danger" role="alert"><i class="fa fa-exclamation"></i> ${e.message}</div>`}})();let e="",i="";var a=t.is_published,o=t.created_by,d=new Date(t.created),l=t.updated_by,r=t.updated,r=new Date(r);let m="";d=helperModule.format_date(d),r=helperModule.format_date(r);if(null!==o&&(m+=`<em>Created by ${o} on ${d}</em>`),null!==l&&(m+=` | <em>Last updated by ${l} on ${r}</em>`),document.querySelector("#created").innerHTML=m,null!==document.querySelector("#is-published")&&1===a?document.querySelector("#is-published").value=!0:null!==document.querySelector("#is-published")&&0===a&&(document.querySelector("#is-published").value=!1),document.querySelector("#item-title-input").value=helperModule.unescape(t.title),document.querySelector("#item-text-input").value=helperModule.unescape(t.text),document.querySelector("#item-description-input").value=helperModule.unescape(t.description),document.querySelector("#item-caption-input").value=t.caption,-1!==window.location.pathname.indexOf("media")){if(document.querySelector("#pdf-open-to-page").value=t.pdf_open_to_page,1===t.is_embedded?document.querySelector("#embed-item").checked=!0:document.querySelector("#embed-item").checked=!1,1===t.is_alt_text_decorative?(document.querySelector("#is-alt-text-decorative").checked=!0,document.querySelector("#item-alt-text-input").disabled=!0):(document.querySelector("#is-alt-text-decorative").checked=!1,document.querySelector("#item-alt-text-input").value=helperModule.unescape(t.alt_text)),0<t.media.length){if(0===t.is_repo_item&&0===t.is_kaltura_item&&(-1!==t.mime_type.indexOf("image")?(i=h.exhibits.exhibit_media.get.endpoint.replace(":exhibit_id",t.is_member_of_exhibit).replace(":media",t.media),e=`<p><img src="${i}" height="200" ></p>`,document.querySelector("#image-alt-text").style.display="block",1===t.is_alt_text_decorative?(document.querySelector("#is-alt-text-decorative").checked=!0,document.querySelector("#item-alt-text-input").disabled=!0):(document.querySelector("#is-alt-text-decorative").checked=!1,document.querySelector("#item-alt-text-input").value=helperModule.unescape(t.alt_text))):-1!==t.mime_type.indexOf("video")?(i="/exhibits-dashboard/static/images/video-tn.png",e=`<p><img src="${i}" height="200" ></p>`):-1!==t.mime_type.indexOf("audio")?(i="/exhibits-dashboard/static/images/audio-tn.png",e=`<p><img src="${i}" height="200" ></p>`):-1!==t.mime_type.indexOf("pdf")?(i="/exhibits-dashboard/static/images/pdf-tn.png",e=`<p><img src="${i}" height="200" ></p>`,document.querySelector("#toggle-open-to-page").style.visibility="visible"):console.log("Unable to Determine Type"),document.querySelector("#item-media-trash").style.display="inline",document.querySelector("#item-media-filename-display").innerHTML=`<span style="font-size: 11px">${t.media}</span>`),document.querySelector("#item-type").value=t.item_type,1===t.is_repo_item&&(document.getElementById("upload-media-tab").classList.remove("active"),document.getElementById("import-repo-media-tab").classList.add("active"),document.getElementById("upload-media").classList.remove("active"),document.getElementById("upload-media").classList.remove("show"),document.getElementById("import-repo-media").classList.add("show"),document.getElementById("import-repo-media").classList.add("active"),document.getElementById("upload-media-tab").setAttribute("aria-selected","false"),document.getElementById("import-repo-media-tab").setAttribute("aria-selected","true"),document.querySelector("#repo-uuid").value=t.media,await helperModule.get_repo_item_data(null)),1===t.is_kaltura_item){document.getElementById("upload-media-tab").classList.remove("active"),document.getElementById("import-audio-video-tab").classList.add("active"),document.getElementById("upload-media").classList.remove("active"),document.getElementById("upload-media").classList.remove("show"),document.getElementById("import-audio-video").classList.add("show"),document.getElementById("import-audio-video").classList.add("active"),document.getElementById("upload-media-tab").setAttribute("aria-selected","false"),document.getElementById("import-audio-video-tab").setAttribute("aria-selected","true"),document.querySelector("#audio-video").value=t.media;var u=document.getElementsByName("item_type");for(let e=0;e<u.length;e++)u[e].value===t.item_type&&(document.querySelector("#"+u[e].id).checked=!0);document.querySelector("#item-type").value="kaltura"}document.querySelector("#item-mime-type").value=helperModule.unescape(t.mime_type),document.querySelector("#item-media-thumbnail-image-display").innerHTML=e,document.querySelector("#item-media").value=t.media,document.querySelector("#item-media-prev").value=t.media}0<t.thumbnail.length&&(i=h.exhibits.exhibit_media.get.endpoint.replace(":exhibit_id",t.is_member_of_exhibit).replace(":media",t.thumbnail),e=`<p><img src="${i}" height="200" ></p>`,document.querySelector("#item-thumbnail-image-display").innerHTML=e,document.querySelector("#item-thumbnail-filename-display").innerHTML=`<span style="font-size: 11px">${t.thumbnail}</span>`,document.querySelector("#item-thumbnail").value=t.thumbnail,document.querySelector("#item-thumbnail-image-prev").value=t.thumbnail,document.querySelector("#item-thumbnail-trash").style.display="inline")}var c=document.getElementsByName("layout");for(let e=0;e<c.length;e++)c[e].value===t.layout&&(document.querySelector("#"+c[e].id).checked=!0);var n=document.getElementsByName("media_width");for(let e=0;e<n.length;e++)parseInt(n[e].value)===parseInt(t.media_width)&&(document.querySelector("#"+n[e].id).checked=!0);var s=JSON.parse(t.styles);if(0!==Object.keys(s).length){void 0!==s.backgroundColor?(document.querySelector("#item-background-color").value=s.backgroundColor,document.querySelector("#item-background-color-picker").value=s.backgroundColor):document.querySelector("#item-background-color").value="",void 0!==s.color?(document.querySelector("#item-font-color").value=s.color,document.querySelector("#item-font-color-picker").value=s.color):document.querySelector("#item-font-color").value="";var p=document.querySelector("#item-font");for(let e=0;e<p.length;e++)p[e].value===s.fontFamily&&(document.querySelector("#item-font").value=s.fontFamily);void 0!==s.fontSize?document.querySelector("#item-font-size").value=s.fontSize.replace("px",""):document.querySelector("#item-font-size").value=""}return!1}return e.init=async function(){try{var e=helperModule.get_parameter_by_name("exhibit_id");exhibitsModule.set_exhibit_title(e),navModule.back_to_grid_items(),await t()}catch(e){document.querySelector("#message").innerHTML=`<div class="alert alert-danger" role="alert"><i class="fa fa-exclamation"></i> ${e.message}</div>`}},e})();