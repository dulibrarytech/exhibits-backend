let itemsListDisplayModule=(()=>{let K=(()=>{try{var e=window.localStorage.getItem("exhibits_app_path");return e?e:(console.error("App path not found in localStorage"),"")}catch(e){return console.error("Error accessing localStorage:",e),""}})(),V=(()=>{try{return endpointsModule.get_exhibits_endpoints()}catch(e){return console.error("Error getting exhibits endpoints:",e),null}})();var e={};let P=e=>{var t,i,d=document.querySelector("#message");d?((t=document.createElement("div")).className="alert alert-danger",t.setAttribute("role","alert"),(i=document.createElement("i")).className="fa fa-exclamation",i.setAttribute("aria-hidden","true"),t.appendChild(i),i=document.createTextNode(" "+e),t.appendChild(i),d.textContent="",d.appendChild(t)):console.error("Message element not found:",e)},q=(e="",t=null)=>{var i=document.createElement("td");return e&&(i.className=e),t&&("string"==typeof t?i.textContent=t:i.appendChild(t)),i},z=(e,t="",i="",d="")=>{var n=document.createElement("i");return n.className=e,n.setAttribute("aria-hidden","true"),t&&n.setAttribute("title",t),i&&n.setAttribute("aria-label",i),d&&(n.style.color=d),n},F=(e,t,i,d,n="")=>{var a=document.createElement("a"),e=(a.href=e,a.setAttribute("title",t),a.setAttribute("aria-label",i),z(d));return a.appendChild(e),n&&(t=document.createTextNode(n),a.appendChild(t)),a},Y=(e,t)=>{var i=document.createElement("a"),d=(i.href="#",i.id=e,i.setAttribute("aria-label","Toggle publication status"),document.createElement("span"));return 1===t?(i.className="suppress-item",d.id="suppress-"+e,d.setAttribute("title","Published - click to unpublish"),t=z("fa fa-cloud","","","green"),d.appendChild(t),d.appendChild(document.createElement("br")),d.appendChild(document.createTextNode("Published"))):(i.className="publish-item",d.id="publish-"+e,d.setAttribute("title","Unpublished - click to publish"),t=z("fa fa-cloud-upload","","","darkred"),d.appendChild(t),d.appendChild(document.createElement("br")),d.appendChild(document.createTextNode("Unpublished"))),i.appendChild(d),i},S=e=>{var t=document.createElement("td"),i=(t.className="grabbable item-order",z("fa fa-reorder")),i=(t.appendChild(i),document.createElement("span"));return i.style.paddingLeft="4px",i.setAttribute("aria-label","Item order "+e),i.textContent=e.toString(),t.appendChild(i),t},I=(e,t,i)=>{var d=encodeURIComponent(e.is_member_of_exhibit),n=encodeURIComponent(e.uuid);let a="",l="",m="";return m=1===i?(a="text"===e.item_type?K+`/items/${t}/text/details?exhibit_id=${d}&item_id=`+n:"heading"===e.type||"grid"===e.type||"vertical_timeline"===e.type?K+`/items/${t}/details?exhibit_id=${d}&item_id=`+n:K+`/items/${t}/media/details?exhibit_id=${d}&item_id=`+n,l="View details","fa fa-folder-open pr-1"):(a="text"===e.item_type?K+`/items/${t}/text/edit?exhibit_id=${d}&item_id=`+n:"heading"===e.type||"grid"===e.type||"vertical_timeline"===e.type?K+`/items/${t}/edit?exhibit_id=${d}&item_id=`+n:K+`/items/${t}/media/edit?exhibit_id=${d}&item_id=`+n,l="Edit item","fa fa-edit pr-1"),F(a,l,""+l.toLowerCase().replace(" ","-"),m)},M=(e,t)=>{var i;return 1===t?z("fa fa-trash pr-1","Can only delete if unpublished","delete-disabled","#d3d3d3"):(t=encodeURIComponent(e.is_member_of_exhibit),i=encodeURIComponent(e.uuid),e=encodeURIComponent(e.type),t=K+`/items/delete?exhibit_id=${t}&item_id=${i}&type=`+e,F(t,"Delete item","delete-item","fa fa-trash pr-1"))},j=e=>{e={text:"fa fa-file-text-o",image:"fa fa-image",video:"fa fa-file-video-o",audio:"fa fa-file-audio-o",pdf:"fa fa-file-pdf-o"}[e]||"fa fa-file-o";return z(e)},G=e=>{var t={video:K+"/static/images/video-tn.png",audio:K+"/static/images/audio-tn.png",pdf:K+"/static/images/pdf-tn.png",default:K+"/static/images/image-tn.png"};return t[e]||t.default},J=(e,t,i=75,d=75)=>{var n=document.createElement("p"),a=document.createElement("img");let l=K+"/static/images/image-tn.png";return a.src=e,a.alt=t,a.width=i,a.height=d,a.addEventListener("error",function(){this.src!==l&&(console.warn(`Thumbnail failed to load: ${e}, using default image`),this.src=l)}),n.appendChild(a),n};return e.display_standard_items=async function(d){try{if(!d||!d.uuid)throw new Error("Invalid item data");var n,a,l,m,r,p=document.createElement("tr"),o=(p.id=d.uuid+`_${d.item_type}_`+d.type,p.appendChild(S(d.order)),document.createElement("td")),c=(o.className="item-metadata",document.createElement("p")),s=document.createElement("button"),u=(s.className="btn btn-default",s.setAttribute("type","button"),s.setAttribute("aria-label",`${d.item_type||"standard"} item`),j(d.item_type)),h=(s.appendChild(u),s.appendChild(document.createTextNode(" ")),document.createElement("small"));h.textContent="item",s.appendChild(h),c.appendChild(s),1===d.is_locked&&(c.appendChild(document.createTextNode("  ")),n=z("fa fa-lock","Record is currently locked","exhibit-is-locked","#BA8E23"),c.appendChild(n)),o.appendChild(c);let e=helperModule.strip_html(helperModule.unescape(d.title||"")),t=null,i=d.media||"";if("text"!==d.item_type)if(1===d.is_repo_item&&d.media){var _,C=await helperMediaModule.get_repo_item_data(d.media);C&&(e&&0!==e.length||(e=C.title),_=helperMediaModule.render_repo_thumbnail(C.thumbnail.data),t=J(_,d.uuid))}else if(1===d.is_kaltura_item){e&&0!==e.length||(e="Kaltura Item");var b=G(d.item_type);t=J(b,d.item_type+" thumbnail")}else{let e=null;"video"===d.item_type?(e=K+"/static/images/video-tn.png",t=J(e,"video-thumbnail")):"audio"===d.item_type?(e=K+"/static/images/audio-tn.png",t=J(e,"audio-thumbnail")):"pdf"===d.item_type?(e=K+"/static/images/pdf-tn.png",t=J(e,"pdf-thumbnail")):"image"===d.item_type&&(t=t||(d.thumbnail&&0<d.thumbnail.length?(e=V.exhibits.exhibit_media.get.endpoint.replace(":exhibit_id",encodeURIComponent(d.is_member_of_exhibit)).replace(":media",encodeURIComponent(d.thumbnail)),J(e,d.uuid+"-thumbnail")):d.media&&0<d.media.length?(e=V.exhibits.exhibit_media.get.endpoint.replace(":exhibit_id",encodeURIComponent(d.is_member_of_exhibit)).replace(":media",encodeURIComponent(d.media)),J(e,d.uuid+"-media")):(e=K+"/static/images/image-tn.png",J(e,"no-thumbnail"))))}else i="Text only";(e=(!e||0===e.length)&&d.text&&0<d.text.length&&200<(e=helperModule.strip_html(helperModule.unescape(d.text))).length?e.substring(0,200)+"...":e)&&(a=document.createElement("p"),(l=document.createElement("strong")).textContent=e,a.appendChild(l),o.appendChild(a)),t&&o.appendChild(t),i&&(m=document.createElement("small"),(r=document.createElement("em")).textContent=i,m.appendChild(r),o.appendChild(m)),p.appendChild(o);var x=q("item-status",""),g=document.createElement("small"),f=Y(d.uuid,d.is_published),y=(g.appendChild(f),x.appendChild(g),p.appendChild(x),document.createElement("td")),E=(y.id=d.uuid+"-item-actions",y.style.width="10%",document.createElement("div")),v=(E.className="card-text text-sm-center",I(d,"standard",d.is_published)),N=(E.appendChild(v),E.appendChild(document.createTextNode(" ")),M(d,d.is_published)),$=(E.appendChild(N),y.appendChild(E),p.appendChild(y),document.createElement("div"));return $.appendChild(p),$.innerHTML}catch(e){return console.error("Error displaying standard item:",e),P(e.message||"Unable to display standard item"),""}},e.display_heading_items=async function(e){try{var t,i,d,n=document.createElement("tr"),a=(n.id=e.uuid+"_"+e.type,n.appendChild(S(e.order)),document.createElement("td")),l=(a.className="item-metadata",document.createElement("p")),m=document.createElement("button"),r=(m.className="btn btn-default",m.setAttribute("type","button"),m.setAttribute("aria-label","heading item"),z("fa fa-header")),p=(m.appendChild(r),m.appendChild(document.createTextNode(" ")),document.createElement("small")),o=(p.textContent="heading",m.appendChild(p),l.appendChild(m),1===e.is_locked&&(l.appendChild(document.createTextNode("  ")),t=z("fa fa-lock","Record is currently locked","exhibit-is-locked","#BA8E23"),l.appendChild(t)),a.appendChild(l),helperModule.strip_html(helperModule.unescape(e.text||""))),c=(o&&(i=document.createElement("p"),(d=document.createElement("strong")).textContent=o,i.appendChild(d),a.appendChild(i)),n.appendChild(a),q("","")),s=(c.style.width="5%",c.style.textAlign="center",document.createElement("small")),u=Y(e.uuid,e.is_published),h=(s.appendChild(u),c.appendChild(s),n.appendChild(c),document.createElement("td")),_=(h.id=e.uuid+"-item-actions",h.style.width="10%",document.createElement("div")),C=(_.className="card-text text-sm-center",I(e,"heading",e.is_published)),b=(_.appendChild(C),_.appendChild(document.createTextNode(" ")),M(e,e.is_published)),x=(_.appendChild(b),h.appendChild(_),n.appendChild(h),document.createElement("div"));return x.appendChild(n),x.innerHTML}catch(e){return console.error("Error displaying heading item:",e),P(e.message||"Unable to display heading item"),""}},e.display_grids=async function(e){try{var t,i,d,n=document.createElement("tr"),a=(n.id=e.uuid+"_"+e.type,n.appendChild(S(e.order)),document.createElement("td")),l=(a.className="item-metadata",document.createElement("p")),m=document.createElement("button"),r=(m.className="btn btn-default",m.setAttribute("type","button"),m.setAttribute("aria-label","grid item"),z("fa fa-th")),p=(m.appendChild(r),m.appendChild(document.createTextNode(" ")),document.createElement("small")),o=(p.textContent="grid",m.appendChild(p),l.appendChild(m),1===e.is_locked&&(l.appendChild(document.createTextNode("  ")),t=z("fa fa-lock","Record is currently locked","exhibit-is-locked","#BA8E23"),l.appendChild(t)),a.appendChild(l),helperModule.strip_html(helperModule.unescape(e.title||""))),c=(o&&(i=document.createElement("p"),(d=document.createElement("strong")).textContent=o,i.appendChild(d),a.appendChild(i)),n.appendChild(a),q("","")),s=(c.style.width="5%",c.style.textAlign="center",document.createElement("small")),u=Y(e.uuid,e.is_published),h=(s.appendChild(u),c.appendChild(s),n.appendChild(c),document.createElement("td")),_=(h.id=e.uuid+"-item-actions",h.style.width="10%",document.createElement("div")),C=(_.className="card-text text-sm-center",encodeURIComponent(e.is_member_of_exhibit)),b=encodeURIComponent(e.uuid),x=K+`/items/grid/items?exhibit_id=${C}&grid_id=`+b,g=F(x,"View grid items","view-grid-items","fa fa-list pr-1"),f=(_.appendChild(g),_.appendChild(document.createTextNode(" ")),I(e,"grid",e.is_published)),y=(_.appendChild(f),_.appendChild(document.createTextNode(" ")),M(e,e.is_published)),E=(_.appendChild(y),h.appendChild(_),n.appendChild(h),document.createElement("div"));return E.appendChild(n),E.innerHTML}catch(e){return console.error("Error displaying grid:",e),P(e.message||"Unable to display grid"),""}},e.display_grid_items=async function(l){try{if(!l||!l.uuid)throw new Error("Invalid grid item data");l.type="griditem";var m,r,p,o,c,s=document.createElement("tr"),u=(s.id=l.uuid+`_${l.type}_`+l.item_type,s.appendChild(S(l.order)),document.createElement("td")),h=(u.className="item-metadata",document.createElement("p")),_=document.createElement("button"),C=(_.className="btn btn-default",_.setAttribute("type","button"),_.setAttribute("aria-label",`${l.item_type||"grid"} item`),j(l.item_type)),b=(_.appendChild(C),_.appendChild(document.createTextNode(" ")),document.createElement("small"));b.textContent="grid item",_.appendChild(b),h.appendChild(_),1===l.is_locked&&(h.appendChild(document.createTextNode("  ")),m=z("fa fa-lock","Record is currently locked","exhibit-is-locked","#BA8E23"),h.appendChild(m)),u.appendChild(h);let t=helperModule.unescape(l.title||""),i=null,e="";if("text"!==l.item_type){if(1===l.is_repo_item){var x,g=await helperMediaModule.get_repo_item_data(l.media);g&&(t=t||g.title,x=helperMediaModule.render_repo_thumbnail(g.thumbnail.data),i=J(x,"Repository item thumbnail"))}else if(1===l.is_kaltura_item){t=t||"Kaltura Item";var f=G(l.item_type);i=J(f,"Kaltura item thumbnail")}else if("image"===l.item_type){let e="";e=l.thumbnail&&0<l.thumbnail.length?V.exhibits.exhibit_media.get.endpoint.replace(":exhibit_id",encodeURIComponent(l.is_member_of_exhibit)).replace(":media",encodeURIComponent(l.thumbnail)):l.media&&0<l.media.length?V.exhibits.exhibit_media.get.endpoint.replace(":exhibit_id",encodeURIComponent(l.is_member_of_exhibit)).replace(":media",encodeURIComponent(l.media)):G("default"),i=J(e,t||"Item image")}else{var y=G(l.item_type);i=J(y,l.item_type+" thumbnail")}l.media&&0<l.media.length&&(e=l.media)}else e="Text only";(t=!t&&l.text&&0<l.text.length&&200<(t=helperModule.unescape(l.text)).length?t.substring(0,200)+"...":t)&&(r=document.createElement("p"),(p=document.createElement("strong")).textContent=t,r.appendChild(p),u.appendChild(r)),i&&u.appendChild(i),e&&(o=document.createElement("small"),(c=document.createElement("em")).textContent=e,o.appendChild(c),u.appendChild(o)),s.appendChild(u);var E=q("",""),v=(E.style.width="5%",E.style.textAlign="center",document.createElement("small")),N=Y(l.uuid,l.is_published),$=(v.appendChild(N),E.appendChild(v),s.appendChild(E),document.createElement("td")),I=($.id=l.uuid+"-item-actions",$.style.width="10%",document.createElement("div")),M=(I.className="card-text text-sm-center",encodeURIComponent(l.is_member_of_exhibit)),w=encodeURIComponent(l.is_member_of_grid),A=encodeURIComponent(l.uuid);let d="",n="",a="";a=1===l.is_published?(d="text"===l.item_type?K+`/items/grid/item/text/details?exhibit_id=${M}&grid_id=${w}&item_id=`+A:K+`/items/grid/item/media/details?exhibit_id=${M}&grid_id=${w}&item_id=`+A,n="View details","fa fa-folder-open pr-1"):(d="text"===l.item_type?K+`/items/grid/item/text/edit?exhibit_id=${M}&grid_id=${w}&item_id=`+A:K+`/items/grid/item/media/edit?exhibit_id=${M}&grid_id=${w}&item_id=`+A,n="Edit grid item","fa fa-edit pr-1");var R,T,U,k=F(d,n,n.toLowerCase().replace(" ","-"),a),L=(I.appendChild(k),I.appendChild(document.createTextNode(" ")),1===l.is_published?(R=z("fa fa-trash pr-1","Can only delete if unpublished","delete-disabled","#d3d3d3"),I.appendChild(R)):(T=K+`/items/grid/item/delete?exhibit_id=${M}&grid_id=${w}&item_id=`+A,U=F(T,"Delete grid item","delete-grid-item","fa fa-trash pr-1"),I.appendChild(U)),$.appendChild(I),s.appendChild($),document.createElement("div"));return L.appendChild(s),L.innerHTML}catch(e){return console.error("Error displaying grid item:",e),P(e.message||"Unable to display grid item"),""}},e.display_timelines=async function(e){try{var t,i,d,n=document.createElement("tr"),a=(n.id=e.uuid+"_"+e.type,n.appendChild(S(e.order)),document.createElement("td")),l=(a.className="item-metadata",document.createElement("p")),m=document.createElement("button"),r=(m.className="btn btn-default",m.setAttribute("type","button"),m.setAttribute("aria-label","timeline item"),z("fa fa-clock-o")),p=(m.appendChild(r),m.appendChild(document.createTextNode(" ")),document.createElement("small")),o=(p.textContent="timeline",m.appendChild(p),l.appendChild(m),1===e.is_locked&&(l.appendChild(document.createTextNode("  ")),t=z("fa fa-lock","Record is currently locked","exhibit-is-locked","#BA8E23"),l.appendChild(t)),a.appendChild(l),helperModule.strip_html(helperModule.unescape(e.title||""))),c=(o&&(i=document.createElement("p"),(d=document.createElement("strong")).textContent=o,i.appendChild(d),a.appendChild(i)),n.appendChild(a),q("","")),s=(c.style.width="5%",c.style.textAlign="center",document.createElement("small")),u=Y(e.uuid,e.is_published),h=(s.appendChild(u),c.appendChild(s),n.appendChild(c),document.createElement("td")),_=(h.id=e.uuid+"-item-actions",h.style.width="10%",document.createElement("div")),C=(_.className="card-text text-sm-center",encodeURIComponent(e.is_member_of_exhibit)),b=encodeURIComponent(e.uuid),x=K+`/items/timeline/items?exhibit_id=${C}&timeline_id=`+b,g=F(x,"View timeline items","view-timeline-items","fa fa-list pr-1"),f=(_.appendChild(g),_.appendChild(document.createTextNode(" ")),I(e,"vertical-timeline",e.is_published)),y=(_.appendChild(f),_.appendChild(document.createTextNode(" ")),M(e,e.is_published)),E=(_.appendChild(y),h.appendChild(_),n.appendChild(h),document.createElement("div"));return E.appendChild(n),E.innerHTML}catch(e){return console.error("Error displaying timeline:",e),P(e.message||"Unable to display timeline"),""}},e.display_timeline_items=async function(l){try{if(!l||!l.uuid)throw new Error("Invalid timeline item data");l.type="timelineitem";var m,r,p,o,c,s=document.createElement("tr"),u=(s.id=l.uuid+`_${l.type}_`+l.item_type,document.createElement("td")),h=(u.className="item-metadata",document.createElement("p")),_=document.createElement("button"),C=(_.className="btn btn-default",_.setAttribute("type","button"),j(l.item_type)),b=(_.appendChild(C),_.appendChild(document.createTextNode(" ")),document.createElement("small"));b.textContent="timeline item",_.appendChild(b),h.appendChild(_),1===l.is_locked&&(h.appendChild(document.createTextNode("  ")),m=z("fa fa-lock","Record is currently locked","exhibit-is-locked","#BA8E23"),h.appendChild(m)),u.appendChild(h);let t=helperModule.strip_html(helperModule.unescape(l.title||"")),i=null,e="";if("text"!==l.item_type){if(1===l.is_repo_item){var x,g=await helperMediaModule.get_repo_item_data(l.media);g&&(t=t||g.title,x=helperMediaModule.render_repo_thumbnail(g.thumbnail.data),i=J(x,"Repository item thumbnail"))}else if(1===l.is_kaltura_item){t=t||"Kaltura Item";var f=G(l.item_type);i=J(f,"Kaltura item thumbnail")}else if("image"===l.item_type){let e="";e=l.thumbnail&&0<l.thumbnail.length?V.exhibits.exhibit_media.get.endpoint.replace(":exhibit_id",encodeURIComponent(l.is_member_of_exhibit)).replace(":media",encodeURIComponent(l.thumbnail)):l.media&&0<l.media.length?V.exhibits.exhibit_media.get.endpoint.replace(":exhibit_id",encodeURIComponent(l.is_member_of_exhibit)).replace(":media",encodeURIComponent(l.media)):G("default"),i=J(e,t||"Item image")}else{var y=G(l.item_type);i=J(y,l.item_type+" thumbnail")}l.media&&0<l.media.length&&(e=l.media)}else e="Text only";(t=!t&&l.text&&0<l.text.length&&200<(t=helperModule.unescape(l.text)).length?t.substring(0,200)+"...":t)&&(r=document.createElement("p"),(p=document.createElement("strong")).textContent=t,r.appendChild(p),u.appendChild(r)),i&&u.appendChild(i),e&&(o=document.createElement("small"),(c=document.createElement("em")).textContent=e,o.appendChild(c),u.appendChild(o)),s.appendChild(u);var E,v,N,$=q("",""),I=($.style.width="5%",$.style.textAlign="center",l.date&&(v=(E=new Date(l.date)).getFullYear()+`-${(E.getMonth()+1).toString().padStart(2,"0")}-`+E.getDate().toString().padStart(2,"0"),(N=document.createElement("small")).textContent=v,$.appendChild(N)),s.appendChild($),q("","")),M=(I.style.width="5%",I.style.textAlign="center",document.createElement("small")),w=Y(l.uuid,l.is_published),A=(M.appendChild(w),I.appendChild(M),s.appendChild(I),document.createElement("td")),R=(A.id=l.uuid+"-item-actions",A.style.width="10%",document.createElement("div")),T=(R.className="card-text text-sm-center",encodeURIComponent(l.is_member_of_exhibit)),U=encodeURIComponent(l.is_member_of_timeline),k=encodeURIComponent(l.uuid);let d="",n="",a="";a=1===l.is_published?(d="text"===l.item_type?K+`/items/vertical-timeline/item/text/details?exhibit_id=${T}&timeline_id=${U}&item_id=`+k:K+`/items/vertical-timeline/item/media/details?exhibit_id=${T}&timeline_id=${U}&item_id=`+k,n="View details","fa fa-folder-open pr-1"):(d="text"===l.item_type?K+`/items/vertical-timeline/item/text/edit?exhibit_id=${T}&timeline_id=${U}&item_id=`+k:K+`/items/vertical-timeline/item/media/edit?exhibit_id=${T}&timeline_id=${U}&item_id=`+k,n="Edit timeline item","fa fa-edit pr-1");var L,S,B,D=F(d,n,n.toLowerCase().replace(" ","-"),a),H=(R.appendChild(D),R.appendChild(document.createTextNode(" ")),1===l.is_published?(L=z("fa fa-trash pr-1","Can only delete if unpublished","delete-disabled","#d3d3d3"),R.appendChild(L)):(S=K+`/items/timeline/item/delete?exhibit_id=${T}&timeline_id=${U}&item_id=`+k,B=F(S,"Delete timeline item","delete-timeline-item","fa fa-trash pr-1"),R.appendChild(B)),A.appendChild(R),s.appendChild(A),document.createElement("div"));return H.appendChild(s),H.innerHTML}catch(e){return console.error("Error displaying timeline item:",e),P(e.message||"Unable to display timeline item"),""}},e.init=function(){return console.log("Items list displays module initialized"),!0},e})();