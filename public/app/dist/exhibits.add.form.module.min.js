let exhibitsAddFormModule=(()=>{let r=window.localStorage.getItem("exhibits_app_path"),o=endpointsModule.get_exhibits_endpoints();var e={};return e.create_exhibit_record=async function(){try{scrollTo(0,0);var t=authModule.get_user_token();let e;var a,i=(()=>{try{var e=exhibitsCommonFormModule.get_common_form_fields();return!1!==e&&(e.styles=exhibitsCommonFormModule.get_exhibit_styles()),e}catch(e){document.querySelector("#message").innerHTML=`<div class="alert alert-danger" role="alert"><i class="fa fa-exclamation"></i> ${e.message}</div>`}})();return!1===i?!1:!(document.querySelector("#message").innerHTML='<div class="alert alert-info" role="alert"><i class="fa fa-info"></i> Creating exhibit record...</div>')===t?(setTimeout(()=>{document.querySelector("#message").innerHTML='<div class="alert alert-info" role="alert"><i class="fa fa-info"></i> Unable to get session token</div>',authModule.logout()},1e3),!1):null===(a=JSON.parse(sessionStorage.getItem("exhibits_user"))).name?!(document.querySelector("#message").innerHTML='<div class="alert alert-danger" role="alert"><i class="fa fa-exclamation"></i> Unable to retrieve your name</div>'):(i.created_by=a.name,void(void 0!==(e=await httpModule.req({method:"POST",url:o.exhibits.exhibit_records.endpoint,data:i,headers:{"Content-Type":"application/json","x-access-token":t}}))&&201===e.status&&(document.querySelector("#message").innerHTML='<div class="alert alert-success" role="alert"><i class="fa fa-info"></i> Exhibit record created</div>',setTimeout(()=>{window.location.replace(r+"/items?exhibit_id="+e.data.data)},900))))}catch(e){document.querySelector("#message").innerHTML=`<div class="alert alert-danger" role="alert"><i class="fa fa-exclamation"></i> ${e.message}</div>`}},e.init=function(){try{document.querySelector("#save-exhibit-btn").addEventListener("click",exhibitsAddFormModule.create_exhibit_record),document.querySelector("#hero-trash").addEventListener("click",exhibitsCommonFormModule.delete_hero_image),document.querySelector("#thumbnail-trash").addEventListener("click",exhibitsCommonFormModule.delete_thumbnail_image)}catch(e){document.querySelector("#message").innerHTML=`<div class="alert alert-danger" role="alert"><i class="fa fa-exclamation"></i> ${e.message}</div>`}},e})();