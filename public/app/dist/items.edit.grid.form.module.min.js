let itemsEditGridFormModule=(()=>{let n=window.localStorage.getItem("exhibits_app_path"),c=endpointsModule.get_exhibits_endpoints();var e={};async function t(){var e=await(async()=>{try{var e,t=helperModule.get_parameter_by_name("exhibit_id"),r=helperModule.get_parameter_by_name("item_id"),a=authModule.get_user_token(),o=c.exhibits.grid_records.get.endpoint.replace(":exhibit_id",t).replace(":grid_id",r);return!1===a?(document.querySelector("#message").innerHTML="ERROR: Unable to get API endpoints",setTimeout(()=>{window.location.replace(n+"/exhibits-dashboard/auth")},1e3),!1):void 0!==(e=await httpModule.req({method:"GET",url:o,headers:{"Content-Type":"application/json","x-access-token":a}}))&&200===e.status?e.data.data[0]:void 0}catch(e){document.querySelector("#message").innerHTML=`<div class="alert alert-danger" role="alert"><i class="fa fa-exclamation"></i> ${e.message}</div>`}})(),t=e.created_by,r=new Date(e.created),a=e.updated_by,o=e.updated,o=new Date(o);let i="";var r=helperModule.format_date(r),o=helperModule.format_date(o),d=(null!==t&&(i+=`<em>Created by ${t} on ${r}</em>`),null!==a&&(i+=` | <em>Last updated by ${a} on ${o}</em>`),document.querySelector("#created").innerHTML=i,document.querySelector("#grid-title-input").value=helperModule.unescape(e.title),document.querySelector("#grid-text-input").value=helperModule.unescape(e.text),document.querySelector("#grid-columns").value=e.columns,JSON.parse(e.styles));if(0!==Object.keys(d).length){void 0!==d.backgroundColor?(document.querySelector("#grid-background-color").value=d.backgroundColor,document.querySelector("#grid-background-color-picker").value=d.backgroundColor):document.querySelector("#grid-background-color").value="",void 0!==d.color?(document.querySelector("#grid-font-color").value=d.color,document.querySelector("#grid-font-color-picker").value=d.color):document.querySelector("#grid-font-color").value="";var l=document.querySelector("#grid-font");for(let e=0;e<l.length;e++)l[e].value===d.fontFamily&&(document.querySelector("#grid-font").value=d.fontFamily);void 0!==d.fontSize?document.querySelector("#grid-font-size").value=d.fontSize.replace("px",""):document.querySelector("#grid-font-size").value=""}return!1}return e.update_grid_record=async function(){try{window.scrollTo(0,0);var e=helperModule.get_parameter_by_name("exhibit_id"),t=helperModule.get_parameter_by_name("item_id"),r=itemsCommonStandardGridFormModule.get_common_grid_form_fields();if(void 0===e||void 0===t)return!(document.querySelector("#message").innerHTML='<div class="alert alert-warning" role="alert"><i class="fa fa-info"></i> Unable to update grid record.</div>');document.querySelector("#message").innerHTML='<div class="alert alert-info" role="alert"><i class="fa fa-info"></i> Updating grid record...</div>';var a=JSON.parse(sessionStorage.getItem("exhibits_user"));if(null===a.name)return!(document.querySelector("#message").innerHTML='<div class="alert alert-danger" role="alert"><i class="fa fa-exclamation"></i> Unable to retrieve your name</div>');r.updated_by=a.name;var o=c.exhibits.grid_records.put.endpoint.replace(":exhibit_id",e).replace(":grid_id",t),i=authModule.get_user_token(),d=await httpModule.req({method:"PUT",url:o,data:r,headers:{"Content-Type":"application/json","x-access-token":i}});void 0!==d&&201===d.status&&(window.scrollTo(0,0),document.querySelector("#message").innerHTML='<div class="alert alert-success" role="alert"><i class="fa fa-info"></i> Grid record updated</div>',d.data.data,setTimeout(()=>{window.location.reload()},900))}catch(e){document.querySelector("#message").innerHTML=`<div class="alert alert-danger" role="alert"><i class="fa fa-exclamation"></i> ${e.message}</div>`}},e.init=async function(){var e=helperModule.get_parameter_by_name("exhibit_id");exhibitsModule.set_exhibit_title(e),document.querySelector("#save-item-btn").addEventListener("click",itemsEditGridFormModule.update_grid_record),await t()},e})();