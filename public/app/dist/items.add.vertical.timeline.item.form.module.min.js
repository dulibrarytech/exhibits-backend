let itemsAddVerticalTimelineItemFormModule=(()=>{let n=window.localStorage.getItem("exhibits_app_path"),d=endpointsModule.get_exhibits_endpoints();var e={create_grid_item_record:async function(){try{window.scrollTo(0,0);let t=helperModule.get_parameter_by_name("exhibit_id"),i=helperModule.get_parameter_by_name("timeline_id");if(void 0===i)return!(document.querySelector("#message").innerHTML='<div class="alert alert-warning" role="alert"><i class="fa fa-info"></i> Unable to create timeline item record.</div>');document.querySelector("#message").innerHTML='<div class="alert alert-info" role="alert"><i class="fa fa-info"></i> Creating timeline item record...</div>';var e=itemsCommonVerticalTimelineItemFormModule.get_common_timeline_item_form_fields();if(void 0===e)return!(document.querySelector("#message").innerHTML='<div class="alert alert-danger" role="alert"><i class="fa fa-exclamation"></i> Unable to get form field values</div>');if(!1===e)return!1;var a=JSON.parse(sessionStorage.getItem("exhibits_user"));if(null===a.name)return!(document.querySelector("#message").innerHTML='<div class="alert alert-danger" role="alert"><i class="fa fa-exclamation"></i> Unable to retrieve your name</div>');e.created_by=a.name;var r=d.exhibits.timeline_item_records.post.endpoint.replace(":exhibit_id",t).replace(":timeline_id",i),l=authModule.get_user_token(),o=await httpModule.req({method:"POST",url:r,data:e,headers:{"Content-Type":"application/json","x-access-token":l}});if(void 0!==o&&201===o.status){document.querySelector("#message").innerHTML='<div class="alert alert-success" role="alert"><i class="fa fa-info"></i> Timeline item record created</div>';let e=o.data.data;setTimeout(()=>{window.location.replace(`${n}/items/vertical-timeline/item/edit?exhibit_id=${t}&timeline_id=${i}&item_id=`+e)},900)}}catch(e){document.querySelector("#message").innerHTML=`<div class="alert alert-danger" role="alert"><i class="fa fa-exclamation"></i> ${e.message}</div>`}},init:function(){try{var e=helperModule.get_parameter_by_name("exhibit_id");exhibitsModule.set_exhibit_title(e),uploadsModule.upload_item_media(),uploadsModule.upload_item_thumbnail(),document.querySelector("#save-item-btn").addEventListener("click",itemsAddVerticalTimelineItemFormModule.create_grid_item_record),document.querySelector("#item-media-trash").style.display="none",document.querySelector("#item-thumbnail-trash").style.display="none",document.querySelector("#is-alt-text-decorative").addEventListener("click",()=>{helperModule.toggle_alt_text()}),document.querySelectorAll(".item-layout-left-right-radio-btn").forEach(e=>{e.addEventListener("click",()=>{document.querySelector("#item-media-width").style.display="block"})})}catch(e){document.querySelector("#message").innerHTML=`<div class="alert alert-danger" role="alert"><i class="fa fa-exclamation"></i> ${e.message}</div>`}}};return e})();