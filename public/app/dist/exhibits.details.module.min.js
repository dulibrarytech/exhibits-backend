let exhibitsDetailsModule=(()=>{let x=window.localStorage.getItem("exhibits_app_path"),S=endpointsModule.get_exhibits_endpoints();var e={};async function t(){try{var t,o,i,r,n=await(async()=>{try{var e=helperModule.get_parameter_by_name("exhibit_id"),t=authModule.get_user_token(),o=authModule.get_user_profile_data();if(!1===t||null===S)return document.querySelector("#message").innerHTML="ERROR: Unable to get API endpoints",setTimeout(()=>{window.location.replace(x+"/dashboard/login")},1e3),!1;document.querySelector("#exhibit-title").innerHTML=await exhibitsModule.get_exhibit_title(e);var i=S.exhibits.exhibit_records.endpoints.get.endpoint.replace(":exhibit_id",e)+"?uid="+o.uid,r=await httpModule.req({method:"GET",url:i,headers:{"Content-Type":"application/json","x-access-token":t}});return void 0!==r&&200===r.status?r.data.data[0]:void 0}catch(e){document.querySelector("#message").innerHTML=`<div class="alert alert-danger" role="alert"><i class="fa fa-exclamation"></i> ${e.message}</div>`}})(),a=n.is_published,l=n.created_by,u=new Date(n.created),c=n.updated_by,d=n.updated,m=new Date(d);let e="";var h=helperModule.format_date(u),s=helperModule.format_date(m),b=(null!==l&&(e+=`<em>Created by ${l} on ${h}</em>`),null!==c&&(e+=` | <em>Last updated by ${c} on ${s}</em>`),document.querySelector("#created").innerHTML=e,null!==document.querySelector("#is-published")&&1===a?document.querySelector("#is-published").value=!0:null!==document.querySelector("#is-published")&&0===a&&(document.querySelector("#is-published").value=!1),document.querySelector("#exhibit-title-input").value=helperModule.unescape(n.title),document.querySelector("#exhibit-sub-title-input").value=helperModule.unescape(n.subtitle),document.querySelector("#exhibit-description-input").value=helperModule.unescape(n.description),document.querySelector("#exhibit-about-the-curators-input").value=helperModule.unescape(n.about_the_curators),1===n.is_featured?document.querySelector("#is-featured").checked=!0:document.querySelector("#is-featured").checked=!1,1===n.is_student_curated?document.querySelector("#is-student-curated").checked=!0:document.querySelector("#is-student-curated").checked=!1,0<n.alert_text.length&&(document.querySelector("#is-content-advisory").checked=!0,document.querySelector("#exhibit-alert-text-input").value=helperModule.unescape(n.alert_text)),0<n.hero_image.length&&(t=`${x}/api/v1/exhibits/${n.uuid}/media/`+n.hero_image,o=`<p><img alt="${n.hero_image}" src="${t}" height="200"></p>`,document.querySelector("#hero-image-display").innerHTML=o,document.querySelector("#hero-image-filename-display").innerHTML=`<span style="font-size: 11px">${n.hero_image}</span>`,document.querySelector("#hero-image").value=n.hero_image,document.querySelector("#hero-image-prev").value=n.hero_image,document.querySelector("#hero-trash").style.display="inline"),0<n.thumbnail.length&&(i=`${x}/api/v1/exhibits/${n.uuid}/media/`+n.thumbnail,r=`<p><img alt="${n.thumbnail}" src="${i}" height="200"></p>`,document.querySelector("#thumbnail-image-display").innerHTML=r,document.querySelector("#thumbnail-filename-display").innerHTML=`<span style="font-size: 11px">${n.thumbnail}</span>`,document.querySelector("#thumbnail-image").value=n.thumbnail,document.querySelector("#thumbnail-image-prev").value=n.thumbnail,document.querySelector("#thumbnail-trash").style.display="inline"),document.getElementsByName("banner_template"));for(let e=0;e<b.length;e++)b[e].value===n.banner_template&&(document.querySelector("#"+b[e].id).checked=!0);var p=JSON.parse(n.styles);if(void 0!==p.exhibit.navigation){void 0!==p.exhibit.navigation.backgroundColor&&0!==p.exhibit.navigation.backgroundColor.length&&(document.querySelector("#nav-background-color").value=p.exhibit.navigation.backgroundColor,document.querySelector("#nav-background-color-picker").value=p.exhibit.navigation.backgroundColor),void 0!==p.exhibit.navigation.color&&0!==p.exhibit.navigation.color.length&&(document.querySelector("#nav-font-color").value=p.exhibit.navigation.color,document.querySelector("#nav-font-color-picker").value=p.exhibit.navigation.color);var v=document.querySelector("#nav-font");for(let e=0;e<v.length;e++)v[e].value===p.exhibit.navigation.fontFamily&&(document.querySelector("#nav-font").value=p.exhibit.navigation.fontFamily);void 0!==p.exhibit.navigation.fontSize&&(document.querySelector("#nav-font-size").value=p.exhibit.navigation.fontSize.replace("px",""))}if(void 0!==p.exhibit.template&&0!==p.exhibit.template.length){void 0!==p.exhibit.template.backgroundColor&&0!==p.exhibit.template.backgroundColor.length&&(document.querySelector("#template-background-color").value=p.exhibit.template.backgroundColor,document.querySelector("#template-background-color-picker").value=p.exhibit.template.backgroundColor),void 0!==p.exhibit.template.color&&0!==p.exhibit.template.color.length&&(document.querySelector("#template-font-color").value=p.exhibit.template.color,document.querySelector("#template-font-color-picker").value=p.exhibit.template.color);var g=document.querySelector("#template-font");for(let e=0;e<g.length;e++)g[e].value===p.exhibit.template.fontFamily&&(document.querySelector("#template-font").value=p.exhibit.template.fontFamily);void 0!==p.exhibit.template.fontSize&&(document.querySelector("#template-font-size").value=p.exhibit.template.fontSize.replace("px",""))}if(void 0!==p.exhibit.introduction){void 0!==p.exhibit.introduction.backgroundColor&&0!==p.exhibit.introduction.backgroundColor.length&&0<p.exhibit.introduction.backgroundColor.length&&(document.querySelector("#introduction-background-color").value=p.exhibit.introduction.backgroundColor,document.querySelector("#introduction-background-color-picker").value=p.exhibit.introduction.backgroundColor),void 0!==p.exhibit.introduction.color&&0<p.exhibit.introduction.color.length&&0!==p.exhibit.introduction.color.length&&(document.querySelector("#introduction-font-color").value=p.exhibit.introduction.color,document.querySelector("#introduction-font-color-picker").value=p.exhibit.introduction.color);var y=document.querySelector("#introduction-font");for(let e=0;e<y.length;e++)y[e].value===p.exhibit.introduction.fontFamily&&(document.querySelector("#introduction-font").value=p.exhibit.introduction.fontFamily);void 0!==p.exhibit.introduction.fontSize&&(document.querySelector("#introduction-font-size").value=p.exhibit.introduction.fontSize.replace("px",""))}return!1}catch(e){document.querySelector("#message").innerHTML=`<div class="alert alert-danger" role="alert"><i class="fa fa-exclamation"></i> ${e.message}</div>`}}return e.init=async function(){try{var e=helperModule.get_parameter_by_name("status");null!==e&&"403"===e&&(document.querySelector("#message").innerHTML='<div class="alert alert-danger" role="alert"><i class="fa fa-exclamation"></i> You do not have permission to edit this record.</div>'),navModule.back_to_exhibits(),document.querySelector("#save-exhibit-btn").addEventListener("click",exhibitsDetailsModule.update_exhibit_record),await t()}catch(e){document.querySelector("#message").innerHTML=`<div class="alert alert-danger" role="alert"><i class="fa fa-exclamation"></i> ${e.message}</div>`}},e})();