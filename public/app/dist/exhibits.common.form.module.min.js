let exhibitsCommonFormModule=(()=>{let o=endpointsModule.get_exhibits_endpoints();var e={get_common_form_fields:function(){const e="#exhibit-title-input",t="#exhibit-sub-title-input",o="#exhibit-description-input",r="#exhibit-about-the-curators-input",n="#exhibit-alert-text-input",l="#is-featured",c="#is-student-curated",a="#is-content-advisory",u="#exhibit-owner",i="#is-published",d="#hero-image",m="#thumbnail-image",s="#exhibit-page-layout",p="#exhibit-template",y="#exhibit-title-error",f="#message";var v=(e,t="")=>document.querySelector(e)?.value?.trim()||t,g=e=>document.querySelector(e)?.checked??!1,h=e=>e?1:0,S=(e,t)=>{var o,r,n=document.querySelector(e);n?((o=document.createElement("div")).className="alert alert-danger",o.setAttribute("role","alert"),(r=document.createElement("i")).className="fa fa-exclamation",t=document.createTextNode(" "+t),o.appendChild(r),o.appendChild(t),n.innerHTML="",n.appendChild(o)):console.error(`Error element ${e} not found`)};try{var b,q,k,_,x,M,L,E,T,C,z,H,F=helperModule.clean_html(v(e)),w=helperModule.clean_html(v(t)),N=helperModule.clean_html(v(o)),$=helperModule.clean_html(v(r));return F?(b=g(l),q=g(c),k=g(a)?helperModule.clean_html(v(n)):"",_=v(u),x=v(i),M=v(d),L=v(m),T=0<(E=document.getElementsByName("banner_template")).length?helperModule.get_checked_radio_button(E):"",C=v(s),z=v(p),H={title:F,subtitle:w,description:N,about_the_curators:$,is_featured:h(b),is_student_curated:h(q),alert_text:k,hero_image:M,thumbnail:L,banner_template:T,page_layout:C,exhibit_template:z},_&&(H.owner=_),x&&(H.is_published=x),H):(S(y,"Please enter an exhibit title"),!1)}catch(e){return console.error("Error getting form fields:",e),S(f,"An error occurred while processing form data"),!1}}};return e.get_exhibit_styles=function(){var t,o,r,n=e=>{var t,o,r={};for([t,o]of Object.entries(e)){r[t]={};for(var[n,l]of Object.entries(o)){c=l.selector;var c=document.querySelector(c)?.value?.trim()||"";r[t][n]=(n=c,c=l.transform,n?c?c(n):n:"")}}return r};try{return{exhibit:n({navigation:{backgroundColor:{selector:"#nav-background-color",transform:null},color:{selector:"#nav-font-color",transform:null},fontFamily:{selector:"#nav-font",transform:null},fontSize:{selector:"#nav-font-size",transform:e=>e?e+"px":""}},template:{backgroundColor:{selector:"#template-background-color",transform:null},color:{selector:"#template-font-color",transform:null},fontFamily:{selector:"#template-font",transform:null},fontSize:{selector:"#template-font-size",transform:e=>e?e+"px":""}},introduction:{backgroundColor:{selector:"#introduction-background-color",transform:null},color:{selector:"#introduction-font-color",transform:null},fontFamily:{selector:"#introduction-font",transform:null},fontSize:{selector:"#introduction-font-size",transform:e=>e?e+"px":""}}})}}catch(e){return console.error("Error getting exhibit styles:",e),n="An error occurred while processing style data",(r=document.querySelector("#message"))?((t=document.createElement("div")).className="alert alert-danger",t.setAttribute("role","alert"),(o=document.createElement("i")).className="fa fa-exclamation",n=document.createTextNode(" "+n),t.appendChild(o),t.appendChild(n),r.innerHTML="",r.appendChild(t)):console.error("Message element not found"),null}},e.get_exhibit_styles__=function(){try{var e={},t={},o={},r={},n=document.querySelector("#nav-background-color").value,l=document.querySelector("#nav-font-color").value,c=document.querySelector("#nav-font").value,a=document.querySelector("#nav-font-size").value,u=document.querySelector("#template-background-color").value,i=document.querySelector("#template-font-color").value,d=document.querySelector("#template-font").value,m=document.querySelector("#template-font-size").value,s=document.querySelector("#introduction-background-color").value,p=document.querySelector("#introduction-font-color").value,y=document.querySelector("#introduction-font").value,f=document.querySelector("#introduction-font-size").value;return 0<n.length?t.backgroundColor=n:t.backgroundColor="",0<l.length?t.color=l:t.color="",0<c.length?t.fontFamily=c:t.fontFamily="",0<a.length?t.fontSize=a+"px":t.fontSize="",0<u.length?o.backgroundColor=u:o.backgroundColor="",0<i.length?o.color=i:o.color="",0<d.length?o.fontFamily=d:o.fontFamily="",0<m.length?o.fontSize=m+"px":o.fontSize="",0<s.length?r.backgroundColor=s:r.backgroundColor="",0<p.length?r.color=p:r.color="",0<y.length?r.fontFamily=y:r.fontFamily="",0<f.length?r.fontSize=f+"px":r.fontSize="",e.exhibit={navigation:t,template:o,introduction:r},e}catch(e){document.querySelector("#message").innerHTML=`<div class="alert alert-danger" role="alert"><i class="fa fa-exclamation"></i> ${e.message}</div>`}},e.delete_hero_image=function(){try{(async()=>{var e=document.querySelector("#hero-image").value,t=authModule.get_user_token();void 0!==(e=await httpModule.req({method:"DELETE",url:o.exhibits.media.delete.endpoint+"?media="+e,headers:{"Content-Type":"application/json","x-access-token":t}}))&&204===e.status&&(document.querySelector("#hero-image").value="",document.querySelector("#hero-image-filename-display").innerHTML="",document.querySelector("#hero-trash").style.display="none",document.querySelector("#hero-image-display").innerHTML="",document.querySelector("#message").innerHTML='<div class="alert alert-success" role="alert"><i class="fa fa-info"></i> Hero image deleted</div>',setTimeout(()=>{document.querySelector("#message").innerHTML=""},1e3))})()}catch(e){document.querySelector("#message").innerHTML=`<div class="alert alert-danger" role="alert"><i class="fa fa-exclamation"></i> ${e.message}</div>`}return!1},e.delete_thumbnail_image=function(){try{(async()=>{var e=document.querySelector("#thumbnail-image").value,t=authModule.get_user_token();void 0!==(e=await httpModule.req({method:"DELETE",url:o.exhibits.media.delete.endpoint+"?media="+e,headers:{"Content-Type":"application/json","x-access-token":t}}))&&204===e.status&&(document.querySelector("#thumbnail-image").value="",document.querySelector("#thumbnail-filename-display").innerHTML="",document.querySelector("#thumbnail-trash").style.display="none",document.querySelector("#thumbnail-image-display").innerHTML="",document.querySelector("#message").innerHTML='<div class="alert alert-success" role="alert"><i class="fa fa-info"></i> Thumbnail image deleted</div>',setTimeout(()=>{document.querySelector("#message").innerHTML=""},3e3))})()}catch(e){document.querySelector("#message").innerHTML=`<div class="alert alert-danger" role="alert"><i class="fa fa-exclamation"></i> ${e.message}</div>`}return!1},e.init=async function(){try{uploadsModule.upload_exhibit_hero_image(),uploadsModule.upload_exhibit_thumbnail_image();var e=authModule.get_user_token();await authModule.check_auth(e),navModule.init(),document.querySelector("#hero-trash").style.display="none",document.querySelector("#thumbnail-trash").style.display="none",document.querySelector("#introduction-background-color-picker").addEventListener("input",()=>{document.querySelector("#introduction-background-color")&&(document.querySelector("#introduction-background-color").value=document.querySelector("#introduction-background-color-picker").value)}),document.querySelector("#introduction-background-color").addEventListener("input",()=>{document.querySelector("#introduction-background-color-picker").value=document.querySelector("#introduction-background-color").value}),document.querySelector("#introduction-font-color-picker").addEventListener("input",()=>{document.querySelector("#introduction-font-color")&&(document.querySelector("#introduction-font-color").value=document.querySelector("#introduction-font-color-picker").value)}),document.querySelector("#introduction-font-color").addEventListener("input",()=>{document.querySelector("#introduction-font-color-picker").value=document.querySelector("#introduction-font-color").value}),document.querySelector("#nav-background-color-picker").addEventListener("input",()=>{document.querySelector("#nav-background-color")&&(document.querySelector("#nav-background-color").value=document.querySelector("#nav-background-color-picker").value)}),document.querySelector("#nav-background-color").addEventListener("input",()=>{document.querySelector("#nav-background-color-picker").value=document.querySelector("#nav-background-color").value}),document.querySelector("#nav-font-color-picker").addEventListener("input",()=>{document.querySelector("#nav-font-color")&&(document.querySelector("#nav-font-color").value=document.querySelector("#nav-font-color-picker").value)}),document.querySelector("#nav-font-color").addEventListener("input",()=>{document.querySelector("#nav-font-color-picker").value=document.querySelector("#nav-font-color").value}),document.querySelector("#template-background-color-picker").addEventListener("input",()=>{document.querySelector("#template-background-color")&&(document.querySelector("#template-background-color").value=document.querySelector("#template-background-color-picker").value)}),document.querySelector("#template-background-color").addEventListener("input",()=>{document.querySelector("#template-background-color-picker").value=document.querySelector("#template-background-color").value}),document.querySelector("#template-font-color-picker").addEventListener("input",()=>{document.querySelector("#template-font-color")&&(document.querySelector("#template-font-color").value=document.querySelector("#template-font-color-picker").value)}),document.querySelector("#template-font-color").addEventListener("input",()=>{document.querySelector("#template-font-color-picker").value=document.querySelector("#template-font-color").value}),helperModule.show_form()}catch(e){document.querySelector("#message").innerHTML=`<div class="alert alert-danger" role="alert"><i class="fa fa-exclamation"></i> ${e.message}</div>`}},e})();