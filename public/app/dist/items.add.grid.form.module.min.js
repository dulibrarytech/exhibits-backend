let itemsAddGridFormModule=(()=>{let o=window.localStorage.getItem("exhibits_app_path"),d=endpointsModule.get_exhibits_endpoints();var e={create_grid_record:async function(){try{window.scrollTo(0,0);let t=helperModule.get_parameter_by_name("exhibit_id");if(void 0===t)return!(document.querySelector("#message").innerHTML='<div class="alert alert-warning" role="alert"><i class="fa fa-info"></i> Unable to create grid record.</div>');document.querySelector("#message").innerHTML='<div class="alert alert-info" role="alert"><i class="fa fa-info"></i> Creating grid record...</div>';var e=itemsCommonStandardGridFormModule.get_common_grid_form_fields();if(!1===e)return!1;var r=JSON.parse(sessionStorage.getItem("exhibits_user"));if(null===r.name)return!(document.querySelector("#message").innerHTML='<div class="alert alert-danger" role="alert"><i class="fa fa-exclamation"></i> Unable to retrieve your name</div>');e.created_by=r.name;var i=authModule.get_user_token(),a=await httpModule.req({method:"POST",url:d.exhibits.grid_records.post.endpoint.replace(":exhibit_id",t),data:e,headers:{"Content-Type":"application/json","x-access-token":i}});if(void 0!==a&&201===a.status){window.scrollTo(0,0),document.querySelector("#message").innerHTML='<div class="alert alert-success" role="alert"><i class="fa fa-info"></i> Grid record created</div>';let e=a.data.data;setTimeout(()=>{location.replace(`${o}/items/grid/edit?exhibit_id=${t}&item_id=`+e)},900)}}catch(e){document.querySelector("#message").innerHTML=`<div class="alert alert-danger" role="alert"><i class="fa fa-exclamation"></i> ${e.message}</div>`}},init:async function(){var e=helperModule.get_parameter_by_name("exhibit_id");exhibitsModule.set_exhibit_title(e),document.querySelector("#save-item-btn").addEventListener("click",itemsAddGridFormModule.create_grid_record)}};return e})();